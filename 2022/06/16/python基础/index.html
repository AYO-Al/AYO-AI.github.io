<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Python基础 | AYO</title><meta name="keywords" content="Python"><meta name="author" content="AYO,2609320892@qq.com"><meta name="copyright" content="AYO"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Python基础"><meta name="application-name" content="Python基础"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Python基础"><meta property="og:url" content="https://ayo-al.github.io/2022/06/16/python%E5%9F%BA%E7%A1%80/index.html"><meta property="og:site_name" content="AYO"><meta property="og:description" content="1 Python简介Python是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。  解释性：这意味python在运行过程中没有编译这个过程 交互式：意味着可以直接运行代码而不用像c语言一样在main函数中执行代码 面向对象的语言：意味着python支持面向对象或代码封装的编程技术"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://ayo-al.github.io/img/preview.jpg"><meta property="article:author" content="AYO"><meta property="article:tag" content=""><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ayo-al.github.io/img/preview.jpg"><meta name="description" content="1 Python简介Python是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。  解释性：这意味python在运行过程中没有编译这个过程 交互式：意味着可以直接运行代码而不用像c语言一样在main函数中执行代码 面向对象的语言：意味着python支持面向对象或代码封装的编程技术"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://ayo-al.github.io/2022/06/16/python%E5%9F%BA%E7%A1%80/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: undefined,
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo.yuki.love',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: undefined,
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: {"appId":"XMRZIUY8NL","apiKey":"187af2610e1cc500c95dc8b8f3a53d0e","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: AYO","link":"链接: ","source":"来源: AYO","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'AYO',
  title: 'Python基础',
  postAI: '',
  pageFillDescription: '1 Python简介, 2 Python编码, 3 python模块安装之pip, 4 python的缩进规则, 5 标识符, 5.1 关键字, 6 转义字符, 7 注释, 7.1 单行注释, 7.2 多行注释, 8 输出函数, 8.1 格式化输出, 8.2 精度和宽度控制, 8.3 转换标志, 8.4 格式字符归纳, 控制输出字体样色, 9 输入函数, 10 变量与常量, python变量域, 11 数据类型, 11.1 数据类型转换, 12 python运算符, 12.1 算术运算符的优先级, 12.2 对象的布尔值, 13 选择结构, 13.1 条件表达式, 13.2 pass语句, 14 循环结构, 14.1 range函数, 14.2 while循环, 14.3 for-in循环, 14.4 流程控制语句, 14.5 循环总结, 15 列表, 15.1 列表的基本操作, 16 字典, 16.1 字典的基本操作, 16.2 字典总结, 17 元组, 17.1 元组的基本操作, 18 集合, 18.1 集合的基本操作, 18.2 元组与集合总结, 19 序列总结, 20 字符串, 20.1 字符串的驻留机制, 20.2 字符串的操作, 21 函数, 21.1 递归函数, 21.2 lambda表达式, 21.2.1 语法, 21.3 函数文档, 22 异常处理机制, 22.1 raise语句, 22.2 BUG总结, 23 python类, 23.1 类总结, 24 面向对象的三大特征, 24.1 封装, 24.2 继承, 24.3 object类, 244 多态, 24.5 面向对象总结, 25 类的浅拷贝与深拷贝, 浅拷贝与深拷贝区别, 26 模块化编程, 26.1 主程序运行, 26.2 python常用模块, 26.3 模块总结, 27 python文件操作, 27.1.文件操作设置模式, 27.2 os 模块, 28 python文件打包, 29 正则表达式, 29.1 re模块, 30 闭包, 31 装饰器, 32 迭代器, 33 生成器, 34.并发编程, 34.1.概念, 34.2.全局解释器锁(GIL), 34.3.多线程编程, 34.4.多进程编程, 34.5.多进程与多线程总结, 34.6.协程编程, 创建协程, 创建task, 绑定回调, 阻塞与await, 并发与并行, 协程嵌套, 协程停止, 不同线程的事件循环, 新线程协程, 主线程与子线程, aiohttp模块, session请求, 使用字节流形式获取数据, 控制同时连接的数量(链接池), 34.并发编程总结, 35.断言, 36.反射, 37.泛型, 变量类型设置, 类型提示的元组打包, 变量类型提示-元组解包, 函数参数类型提示, 常用类型, 变量别名, NewType, Callable, TypeVar泛型, Any Type, Union, Optional简介是一个高层次的结合了解释性编译性互动性和面向对象的脚本语言解释性这意味在运行过程中没有编译这个过程交互式意味着可以直接运行代码而不用像语言一样在函数中执行代码面向对象的语言意味着支持面向对象或代码封装的编程技术编码如果源码文件没有声明编码格式解释器会默认使用编码可以在文件头写等修改默认的编码格式或者修改若文件中出现与编码格式不一致的字符时解释器就会报错模块安装之是的包安装程序其实就是标准库中的一个包可以用来管理标准库中的包也可以用来安装非标准库的包一般安装包已经自带使用可以在界面中用查看安装使用说明可以直接包名来安装包安装时还可以指定版本安装包例下最新版本指定版本最小版本查看安装包信息查看已经安装的包及版本信息还可以导出包信息到指定文件如文件名称随意也可以使用两者等效包卸载卸载包命令包名批量卸载把包信息导入到文件包升级包名或包名列出安装包查看已经安装的包及版本信息查看可更新的包信息显示包所在目录及信息包名包名查看包的详细信息搜索包关键字的缩进规则一般用新行作为语句的结束标识中用缩进来区分代码块编码规范指导使用个空格作为缩进但是在复杂代码中会选择用个空格作为缩进使代码更容易读懂物理行与逻辑行区别物理行代码编辑器中显示的代码每一行内容是一个物理行逻辑行解释器对代码进行介绍一个语句是一个逻辑行相同的逻辑行要保持相同的缩进标记一个新的逻辑层增加缩进表示进入下一个逻辑层减少缩进表示返回上一个逻辑层使用可以把多个逻辑行合成一个物理行使用可以把逻辑行分成多行标识符标识符是编程时使用的名字用于给变量函数语句块等命名中标识符由字母数字下划线组成不能以数字开头区分大小写以下划线开头的标识符有特殊含义表示不能直接访问的类属性需通过类提供的接口进行访问不能用导入双下划线开头的标识符如表示私有成员双下划线开头和结尾的标识符如表示中内置标识如表示类的构造函数中主要存在四种命名方式公用方法半保护被看作是意思是只有类对象和子类对象自己能访问到这些变量在模块或类外不可以使用不能用导入是为了避免与子类的方法名称冲突对于该标识符描述的方法父类的方法不能轻易地被子类的方法覆盖他们的名字实际上是全私有全保护私有成员意思是只有类对象自己能访问连子类对象也不能访问到这个数据不能用导入内建方法用户不要这样定义关键字自定义标识符时不能使用关键字转义字符需要在字符中使用特殊字符时就需要用到转义字符在里用反斜杠转义字符当字符串中包含反斜杠单引号和双引号等有特殊用途的字符时必须使用反斜杠对这些字符进行转义转换一个含义当字符串中包含换行回车水平制表符或退格等无法直接表示的特殊字符时也可以使用转义字符当字符串中包含换行回车水平制表符或退格等无法直接表示的特殊字符时也可以使用转义字符注释解释器在执行代码时会忽略注释不做任何处理注释最大的作用就是提高代码的可读性单行注释注释内容多行注释使用三个连续的单引号或者三个连续的双引号注释多行内容如注释内容注释内容输出函数输出函数为无论什么类型的数据都可以直接输出使用如下参数表示输出对象输出多个对象时需要用逗号分隔参数用来间隔多个对象参数用来设定以什么结尾参数要写入的文件对象如果直接输出字符串而不是用对象表示的话可以不使用逗号运行结果如下可知不添加逗号分隔符字符串之间没有间隔在输出前加表示原样输出格式化输出精度和宽度控制意思为变量保留两位小数在后分别加分别表示输出居中左对齐右对齐第二三种不可控其他格式控制方式与语言一样转换标志转换标志表示左对齐表示在数值前要加上正负号空白字符表示正数之前保留空格表示转换值若位数不够则用填充格式字符归纳格式符格式符输出格式符格式符输出字符串输出字符串输出单个字符输出二进制整数输出十进制整数输出十进制整数八进制整数输出十六进制整数输出指数输出为基底上同为基底浮点数浮点数指数或浮点数根据显示长度指数或浮点数根据显示长度控制输出字体样色输入函数使用控制键盘录入请输入请输入一次性输入多个变量请输入录入多个数且用逗号隔开以上一种方式的类型转换请输入这样就可以把所有数转换为类型变量与常量变量一般值改变后内存地址随着改变局部变量和全局变量常量没有常规意义上的常量约定用全大写标识符表示常量但其值还是可以改变所以后来用户可以自定义类来实现常量定义一个常量类实现常量的功能该类定义了一个方法和一个异常类继承自类通过调用类自带的字典判断定义的常量是否包含在字典中如果字典中包含此变量将抛出异常否则给新创建的常量赋值最后两行代码的作用是把类注册到这个全局字典中变量域中的种作用域局部作用域也就是我们在函数中定义的变量嵌套的父级函数的局部作用域即包含此函数的上级函数的局部作用域但不是全局的全局变量就是模块级别定义的变量系统内置模块里面的变量比如等查找循序也是由上往下当参数为可变对象时传参采用的是引用传递修改形参将对实参造成影响当参数为不可变对象时传参采用的是值传递修改形参对实参无影响数据类型常用数据类型类型类型名实例整数类型浮点类型布尔类型字符串类型人生苦短我用空值整数类型浮点类型布尔类型字符串类型数据类型转换数据类型转化事项特别注意函数有两个参数如果只有一个参数则转换为整数如果有第二个参数则为指定转换的进制运算符算术运算符赋值运算符比较运算符布尔运算符位运算符海象运算符算术运算符整除一正一负向下取整赋值运算符没有自增自减运算符自增自减用实现比较运算符布尔运算符位运算符海象运算符符号作用为变量赋值一般不单独使用已经成年算术运算符的优先级算术运算符优先级对象的布尔值一切皆对象所有对象都有一个布尔值可以使用内置函数获取对象的布尔值布尔值为的对象数值空字符串空列表空元组空字典空字典其他对象布尔值为选择结构语法结构的选择条件可以使用数学方式表达与不一样不能连续比较后面不能接条件只能接小于大于嵌套条件表达式基本语法输出判断条件为输出前面否则输出后面语句简介循环结构函数用于生成一个整数序列默认从开始基础语法循环基础语法循环基础语法不需要变量时人生苦短我用流程控制语句语句基础语法语句基础语法语句基础语法循环总结列表列表可存储不同类型的值列表的基本操作创建列表列表的特点获取列表指定元素的索引函数获取列表的多个元素切片切片会产生新的列表列表查询与遍历列表的增加操作在末尾加一个元素在末尾加任意多元素参数为列表在第个位置加上一个元素切片把切出去的部分用新列表替换列表的删除删除元素删除第个元素若不指定则删除最后一个元素切片出第个到第个元素清除全部元素删除列表报错没有变量列表的排序不会产生新列表对象会产生新的列表对象不会产生新对象会产生新对象列表生成式基本语法迭代器生成一个元素的列表字典以键值对的方式无序存储数据把进过哈希函数计算得出位置要求为不可变序列不可重复字典的基本操作创建字典以序列中元素做字典的键为字典所有键对应的初始值字典元素的获取张三张三设置默认查找值当查字典没有的元素时返回默认值的判断元素删除元素新增获取字典视图张三获取所有获取所有值获取所有键值对张三张三字典遍历张三获取的是获取值字典生成式基本语法列表列表列表列表列表列表若打包的两个列表元素数目不一样则按元素数目少的列表打包字典总结元组是一个不可变序列元组的基本操作元组的创建第一种方式可以省略小括号第三种方式如果省略逗号会被认为是元素原来的类型为什么要把元组设计成不可变序列遍历元组元组生成式元组没有生成式集合集合是没有的字典集合的基本操作集合的创建集合的元素不能重复空集合创建只能用内置函数进行设置集合的判断新增删除末尾增加一个元素末尾至少增加一个元素删除一个指定元素删除一个指定元素一次删除头部一个元素清空元素集合间的关系判断集合是否相等判断集合是否是集合的子集判断集合的父集是否是判断两个集合是否是没有交集集合的数学操作集合的交集集合的并集集合的差集集合的对称差集集合生成式元组与集合总结序列总结不可变序列还有字符串可变对象和不可变对象的区别可变对象改变对象内容对象在内存中的地址不会被改变不可变对象改下对象内容对象在内存中的地址会被改变如果必须存储一个不同的值则必须创建新的对象字符串基本数据类型是一个不可变序列字符串的驻留机制基本概述中对字符串的驻留机制进行了优化只要是字符串都可以驻留驻留机制优缺点字符串的操作字符串的查询人生苦短我用查找子串第一次出现的位置无子串报错查找子串最后一次出现的位置无子串报错查找子串第一次出现的位置无子串返回查找子串最后一次出现的位置无子串返回字符串的大小写转换人生苦短我用全部字符转换为大写全部字符转换为小写大写转小写小写转大写第一个字符转换为大写其他字符转换为小写把每个单词第一个字母大写其他为小写人生苦短我用人生苦短我用人生苦短我用人生苦短我用人生苦短我用字符串对齐人生苦短我用居中右对齐左对齐右对齐字符串的劈分对于函数对于分隔符出现在首尾的情况在首尾处分割会产生同一个空串有几个分隔符就有几个空串对于出现在字符串中间的情况单独出现和普通情况没有区别如果出现多个两个分隔符中间就会产生一个空串字符串的判断判断是否为合法的标识符判断是否全由空白字符组成判断是否全为字母判断是否全为十进制数字判断是否全为数字判断是否全为字母和数字字符串的替换与合并木头人将指定子串替换在每两个列表元素中间加一个字符串木头人字符串的比较字符串的切片由于字符串是不可变序列字符串的增删改切片等操作都会产生新的对象字符串的编码转换字符串的编码使用类的方法字符串的解码使用方法天涯共此时编码解码天涯共此时编码和解码所使用的的字符编码必须一致否则会报错函数函数就是执行特定任务和完成特定功能的一段代码函数的好处复用代码隐藏实现细节提高可维护性提高可读性便于调试函数的创建函数名输入参数函数体函数参数传递默认值参数其他类型参数如果两个参数都有则可边的位置参数要在可变的关键字参数前面当接受参数后意思为把元组里的数据打散为位置参数为把字典里的数据打散为关键字参数参数总结函数内存分析如果不可变对象那么在函数体内的修改不会影响实参的值如果是可变对象在函数体的修改会影响到实参函数的返回值支持多返回值如果函数没有返回值可以省略不写函数的返回值如果是一个直接返回类型函数的返回值如果是多个返回的结果是一个元组递归函数如果一个函数的函数体调用了函数本身这个函数就被称为递归函数表达式使用来创建匿名函数只是一个表达式函数体比简单很多的主体只是一个表达式而不是一个代码块仅仅能在表达式中封装有限的逻辑进去函数拥有自己的命名空间且不能访问自有参数列表之外或全局命名空间里的参数语法实例函数文档使用内置函数来查看函数文档函数原型函数功能参数解释编写函数文档功能汇率转换美元数汇率人民币数量功能汇率转换美元数汇率人民币数量异常处理机制被动掉坑类型当存在多个结构时应该按照先子类再父类的顺序捕获异常为避免遗漏可能出现的异常可以在最后加常见的类型模块可以把异常打印在日记文件中手动抛出异常分数为分数不正确当没有语句时异常由捕获语句语法错误类型打印的错误语句直接抛出错误以及打印错误语句总结类创建类类之外的叫函数类里面的叫方法类属性类方法静态方法都可以直接类名属性名调用不需要创建对象对象的创建动态绑定属性和方法在类中可以使用变量限制实例对象的属性和方法如果子类中没有定义属性则不会继承父类的属性如果定义了该属性则子类对象允许的实例属性包括子类加上父类的限制我是今年我是函数李磊我是李磊今年我是函数抽象类在中并没有像一样很好的支持抽象类所以要导入库中的元类和包装器来负责设置抽象类和抽象方法当一个类中有抽象方法时该类无法实例化运算符重载在中在类里通过重写内置运算符函数啦重载运算符加法运算符重载和减法运算符重载的实现在列表末尾添加新的对象运算符重载后的列表运算符重载后的列表运算符重载后的列表运算符重载后的列表类中内置方法若要表现像个序列必须满足序列的两个方法和类中如果没有实现因此不满足序列协议对对象的迭代需要调用如果没有定义该方法会调用让迭代和运算符可用根据索引访问对象元素会调用类总结面向对象的三大特征封装没有专门的封装关键字所以在属性名前用表示私有吉林列出中所有属性吉林继承继承类方法重写类类特殊的方法和属性输出对象所属类输出类的基类输出所有父类输出基础层次输出所有子类的列表与在前多态静态语言和动态语言关于多态的区别面向对象总结类的浅拷贝与深拷贝基础介绍浅拷贝深拷贝浅拷贝浅拷贝会创建一个新对象该新对象存储原始元素的引用浅拷贝的四种实现方式使用切片使用工厂函数使用数据类型的函数使用库的函数深拷贝在浅拷贝基础上拷贝子对象浅拷贝与深拷贝区别浅拷贝和深拷贝只有在可变对象才会生效不可变对象的赋值浅拷贝深拷贝的效果都是一样的浅拷贝会将对象复制生成一个新对象但新对象任然存储原始对象的引用当原始对象时可变对象然后修改它的值时新旧对象会同时改变深拷贝不仅会将对象复制生成一个新对象且所有原始对象都会复制生成新对象及时原始对象时可变对象新对象存储的对象引用也是新的所以改变旧对象的可改变对象时不会影响新对象模块化编程模块基础创建与导入模块使用时只能接包名和模块名可以导入包模块变量同一目录下直接导入不同目录下导入包主程序运行常用模块模块总结文件操作文件的读写常用文件处理方式文件常用方法文件对象调用完一定要关闭语句文件操作设置模式模块操作目录的方法会把所有子目录和文件遍历出来操作目录常用函数文件打包打包不带控制台的打包打包指定图标打包正则表达式正则支持普通字符元字符匹配一个数字的数字匹配一个数字字母下划线匹配与上面取反就是取数字以外的内容取范围匹配换行符之外的东西量词控制前面元字符出现的频次前面元字符出现次或多次前面元字符出现次或多次尽可能多的匹配结果前面元字符出现次或多次惰性匹配以开头结尾的尽可能长的字符以开头以结尾尽可能短的字符惰性匹配模块函数作用正则表达式字符串拿到列表拿到第一个结果就返回返回一个对象要输出对象的话要用到方法把拿到的对象全放到迭代器里也是对象结果比较大就用这个预加载正则表达式先创建一个正则表达对象字符串提取惰性匹配的值也可以用方法输出为字典闭包在计算机科学中闭包英语又称词法闭包或函数闭包是引用了自由变量的函数这个被引用的自由变量将和这个函数一同存在即使已经离开了创造它的环境也不例外所以有另一种说法认为闭包是由函数和与其相关的引用环境组合而成的实体闭包在运行时可以有多个实例不同的引用环境和相同的函数组合可以产生不同的实例本层函数对外层函数的局部变量的使用此时内层函数被称为闭包函数关键字用来在函数或者其他作用域中使用改变外层非全局变量关键字使局部变量改变全局变量闭包作用让一个变量常驻于内存可以在外部使用改变局部变量可以避免全局变量被修改进来了出去了装饰器装饰器本质就是闭包对外部参数的引用装饰器的一个关键特性是它们在被装饰的函数定义之后立即运行作用再不改变原有函数调用下给函数增加新功能被装饰函数的参数问题被装饰函数有参数的话返回函数和目标函数都要加参数装饰器参数问题使用带有参数的装饰器起始是在装饰器外面又包裹了一个函数使用该函数接受参数返回是装饰器装饰器只能接受一个参数并且还是函数类型正在努力加法计算正在努力减法计算运行结果正在努力加法计算正在努力减法计算一个函数可被多个装饰器装饰通用装饰器写法迭代器迭代器基本概念迭代器的特点只能向前不能反复特别节省内存惰性机制生成器本质就是迭代器生成器函数衣服衣服衣服衣服衣服衣服衣服推导式生成器表达式优点用好了特别节省内存生成器表达式是一次性的语法数据循环并发编程概念进程就是操作系统中执行的一个程序操作系统以进程为单位分配存储空间每个进程都有自己的地址空间数据栈以及其他用于跟踪进程执行的辅助数据操作系统管理所有进程的执行为它们合理的分配资源进程可以通过或的方式来创建新的进程来执行其他的任务不过新的进程也有自己独立的内存空间因此必须通过进程间通信机制来实现数据共享具体的方式包括管道信号套接字共享内存区等一个进程还可以拥有多个并发的执行线索简单的说就是拥有多个可以获得调度的执行单元这就是所谓的线程由于线程在同一个进程下它们可以共享相同的上下文因此相对于进程而言线程间的信息共享和通信更加容易当然在单核系统中真正的并发是不可能的因为在某个时刻能够获得的只有唯一的一个线程多个线程共享了的执行时间使用多线程实现并发编程为程序带来的好处是不言而喻的最主要的体现在提升程序的性能和改善用户体验今天我们使用的软件几乎都用到了多线程技术并发编程就是为了提升程序运行速度多线程利用和可以同时执行的原理让不会等完成再工作多进程利用多核的能力真正的并行执行任务异步在单线程利用和同时执行的原理实现函数异步执行使用对资源进行加锁防止冲突访问使用实现不同进程线程之间的数据通信实现生产者消费者模式使用线程池进程池简化进程线程的任务体检等待结束获取结果使用启动外部程序的进程并进行输入输出交互全局解释器锁速度慢的原因是动态类型语言边解释边执行存在无法利用多核并发执行是什么是计算机程序设计语言解释器用于同步线程的一种机制它使得任何时刻仅有一个线程在执行即便在多核处理器上使用的解释器也只允许同一时间执行一个线程为什么要有在设计初期为了解决多线程之间数据完整性和状态同步问题设置出了为了应对问题提供了使用该模块的多进程机制实现并行计算利用多核优势多线程编程任何线程执行前必须先获得锁然后每执行条字节码解释器就自动释放锁让别的线程有机会执行线程堵塞的几种情况线程调用了方法线程等待接受用户输入的数据线程识图获取某个对象的同步锁如果该锁被其他线程持有则该线程会进入堵塞状态线程调用方法直接使用类创建线程开始下载下载完成耗费了秒创建线程参数为目标函数名参数为函数所需要参数以元组形式参数以字典的方式为指定的方法传递参数参数指定所创建的线程是否为后代线程参数为线程设置名字有一种线程它是在后台运行的它的任务是为其他线程提供服务这种线程被称为后台线程又称为守护线程或精灵线程解释器的垃圾回收线程就是典型的后台线程当所有前台线程终止时后台线程会自动终止从入门到住院线程开始等待线程是在程序指定位置优先让该方法的调用者使用资源为唯一参数为指定线程最多可霸占资源时间总共耗费了秒使用继承类进行创建进程重写方法开始下载下载完成耗费了秒从入门到住院总共耗费了秒因为多个线程可以共享进程的内存空间因此要实现多个线程间的通信相对简单大家能想到的最直接的办法就是设置一个全局变量多个线程共享这个全局变量即可但是当多个线程共享同一个变量我们通常称之为资源的时候很有可能产生不可控的结果从而导致程序失效甚至崩溃如果一个资源被多个线程竞争使用那么我们通常称之为临界资源对临界资源的访问需要加上保护否则资源会处于混乱的状态下面的例子演示了个线程向同一个银行账户转账转入元钱的场景在这个例子中银行账户就是一个临界资源在没有保护的情况下我们很有可能会得到错误的结果计算存款后的余额模拟受理存款业务需要秒的时间修改账户余额创建个存款的线程向同一个账户中存钱等所有存款的线程都执行完毕账户余额为元运行结果远远少于元这是因为当多个线程同时向账户中存取时会一起执行计算余额的操作而多线程得到的账户余额都是初始状态下的所以最后得到的结果才会远远小于针对上面出现的问题可以使用模块中的锁可以通过锁来保护临界资源只有获得锁的线程才能访问临界资源没有得到锁的进程就只能被阻塞起来知道获得锁的进程释放了锁其他进程才能获取进而访问被保护的临界资源其实除非必须将多线程使用的资源设置为公共资源模块还提供了一种可彻底避免数据不同步问题的方法即函数使用函数创建的变量可以被各个线程调用但和公共资源不同各个线程在使用函数创建的变量时都会在该线程自己的内存空间中拷贝一份这意味着函数创建的变量看似全局变量可以被各个线程调用但各线程调用的都是该变量的副本各调用各的之间并无关系可以这么理解使用模块中的函数可以为各个线程创建完全属于它们自己的变量又称线程局部变量正是由于各个线程操作的是属于自己的变量该资源属于各个线程的私有资源因此可以从根本上杜绝发生数据同步问题先获取锁才能执行后续的代码在中执行释放锁的操作保证正常异常锁都能释放账户余额为元创建全局对象获取当前线程关联的为当前线程绑定的线程的调用函数不需要传递了可以通过全局变量访问线程线程对于不同线程之间的数据通信可以用方法说明创建类添加元素会堵塞获取元素会堵塞查看元素的多少判断是否为空判断是否满了此类只能在单进程内使用新建线程需要分配资源终止线程需要回收资源如果可以重用线程则可以减去新建与终止的开销这就是线程池的作用可以提升性能避免系统因为创建线程过多而导致系统负荷太大相应变慢等问题适合处理突发性大量请求或大量线程完成任务但实际任务处理时间较短导入模块方法可关闭线程池为执行函数为全部参数列表函数的结果的入参是顺序对应的方法方法一次只能提交一个参数列表这种遍历方法会等线程全部结束在按循序进行遍历输出这种遍历方法不会等全部线程结束而是线程池里一有结果就输出多进程编程当遇到密集型运算时使用多进程能更好的加快程序运行速度模块就是为了解决缺席引入的一个模块原理是用多进程在多上并行执行启动下载进程进程号开始下载下载完成耗费了秒跟线程一样从入门到住院总共耗费了秒多进程与多线程总结协程编程现代操作系统对操作的改进中最为重要的就是支持异步如果充分利用操作系统提供的异步支持就可以用单进程单线程模型来执行多任务这种全新的模型称为事件驱动模型就是支持异步的服务器它在单核上采用单进程模型就可以高效地支持多任务在多核上可以运行多个进程数量与核心数相同充分利用多核用开发的服务器端程序也使用了这种工作模式这也是当下并发编程的一种流行方案在语言中单线程异步的编程模型称为协程有了协程的支持就可以基于事件驱动编写高效的多任务程序协程最大的优势就是极高的执行效率因为子程序切换不是线程切换而是由程序自身控制因此没有线程切换的开销协程的第二个优势就是不需要多线程的锁机制因为只有一个线程也不存在同时写变量冲突在协程中控制共享资源不用加锁只需要判断状态就好了所以执行效率比多线程高很多如果想要充分利用的多核特性最简单的方法是多进程协程既充分利用多核又充分发挥协程的高效率可获得极高的性能事件循环程序开启一个无限循环程序员会把一些函数注册到事件循环上当满足事件发生的时候调用相应的协程函数协程协程对象指一个使用关键字定义的函数它的调用不会立即执行函数而是返回一个协程对象协程对象需要注册到事件循环由事件循环调用任务一个协程对象就是一个原生可以挂起的函数任务则是对协程进一步封装其中包含任务的各种状态代表将来执行或没有执行的任务的结果和一样用于定义协程的关键字定义一个协程用于挂起阻塞的异步调用接口异步上下文管理器指的是在和方法处能暂定执行的上下文管理器异步迭代器创建协程关键字定义协程注册一个事件循环将协程注册到事件循环创建协程对象不能直接运行在注册事件循环的时候其实是方法将协程包装成为了一个任务对象所谓对象是类的子类保存了协程运行后的状态用于未来获取协程的结果创建一个对象项目项目和都可以创建一个的参数是一个对象当传入一个协程其内部会自动封装成是的子类将会输出绑定回调绑定回调阻塞与如果在异步协程中出现了同步模块相关的代码那么则无法实现异步协程遇到如果后面跟的是阻塞事件事件循环将会挂起协程执行别的协程如果是别的协程则会转执行别的协程并发与并行并发通常指有多个任务需要同时进行并行则是同一时刻有多个任务执行实现并发就需要多个协程来完成任务每当有任务阻塞的时候就然后其他协程继续工作创建多个协程的列表然后将这些协程注册到事件循环中也可以使用前者接受一个列表后者接收一堆会返回完成的任务列表和等待完成的任务列表返回的是协程结果集结果为协程嵌套嵌套的协程即一个协程中了另外一个协程如此连接起来可以使用但是返回的是结果集可以使用方法协程若有返回值该函数会返回协程的返回值协程停止一般来说有以下几种状态刚创建对象时事件循环调用时调用完毕取消调用读取列表取消调用暂停事件循环暂停循环后需要再次开启循环最后关闭不然会抛出异常再次开启循环关闭循环当发生协程嵌套时只需要终止最外层的协程就行了读取列表暂停事件循环暂停循环后需要再次开启循环最后关闭不然会抛出异常再次开启循环关闭循环不同线程的事件循环很多时候我们的事件循环用于注册协程而有的协程需要动态的添加到事件循环中一个简单的方式就是使用多线程当前线程创建一个事件循环然后在新建一个线程在新线程中启动事件循环当前线程不会被将设置为当前线程的当前事件循环运行事件循环直到被调用创建一个新循环新线程协程主线程中创建一个然后在另外的子线程中开启一个无限事件循环主线程通过新注册协程对象这样就能在子线程中进行事件循环的并发操作同时主线程又不会被一共执行的时间大概在左右主线程与子线程因为协程更适合单线程当有了不同类型任务时我们可以开多线程协程来处理不同任务如主线程用来监听队列子线程用来处理队列退出可以把子线程设置为守护线程当主线程退出后自动退出设置子线程为守护线程模块请求在模块中发起一个请求需要创建一个对象如果要自定义则要在创建对象的时候引入自定义字典跟一样的请求方式是基于同步是基于异步如果要携带参数的话直接字典传入参数代理使用参数返回字符串的响应数据返回二进制的响应数据返回类型响应数据除了上面的请求方式外总结当我们使用时只会获取到当前下设置的不会维护整站的而',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-16 00:00:00',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="AYO" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://git.yuki.love/" title="AYO网站"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="AYO网站"/><span class="back-menu-item-text">AYO网站</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3708003152300183" title="AYO博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="AYO博客"/><span class="back-menu-item-text">AYO博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/AYO-Al" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">AYO</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Ansible/" style="font-size: 1.05rem;">Ansible<sup>1</sup></a><a href="/tags/CDN/" style="font-size: 1.05rem;">CDN<sup>1</sup></a><a href="/tags/DNS/" style="font-size: 1.05rem;">DNS<sup>1</sup></a><a href="/tags/ELK/" style="font-size: 1.05rem;">ELK<sup>1</sup></a><a href="/tags/Httpd/" style="font-size: 1.05rem;">Httpd<sup>1</sup></a><a href="/tags/Keepalived/" style="font-size: 1.05rem;">Keepalived<sup>1</sup></a><a href="/tags/Kubernetes/" style="font-size: 1.05rem;">Kubernetes<sup>2</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>18</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>1</sup></a><a href="/tags/Nginx/" style="font-size: 1.05rem;">Nginx<sup>2</sup></a><a href="/tags/Prometheus/" style="font-size: 1.05rem;">Prometheus<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>5</sup></a><a href="/tags/Redis/" style="font-size: 1.05rem;">Redis<sup>1</sup></a><a href="/tags/Shell/" style="font-size: 1.05rem;">Shell<sup>4</sup></a><a href="/tags/Web/" style="font-size: 1.05rem;">Web<sup>1</sup></a><a href="/tags/Zabbix/" style="font-size: 1.05rem;">Zabbix<sup>1</sup></a><a href="/tags/iptables/" style="font-size: 1.05rem;">iptables<sup>1</sup></a><a href="/tags/shell%E5%91%BD%E4%BB%A4/" style="font-size: 1.05rem;">shell命令<sup>1</sup></a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 1.05rem;">容器<sup>2</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 1.05rem;">爬虫<sup>3</sup></a><a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 1.05rem;">监控<sup>2</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>3</sup></a><a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" style="font-size: 1.05rem;">自动化运维<sup>1</sup></a><a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 1.05rem;">随笔<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/03/"><span class="card-archive-list-date">三月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/" itemprop="url">Python</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Python/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Python</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Python基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2022-06-15T16:00:00.000Z" title="发表于 2022-06-16 00:00:00">2022-06-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2022-06-15T16:00:00.000Z" title="更新于 2022-06-16 00:00:00">2022-06-16</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">14.2k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>53分钟</span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/img/preview.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://ayo-al.github.io/2022/06/16/python%E5%9F%BA%E7%A1%80/"><header><a class="post-meta-categories" href="/categories/Python/" itemprop="url">Python</a><a href="/tags/Python/" tabindex="-1" itemprop="url">Python</a><h1 id="CrawlerTitle" itemprop="name headline">Python基础</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">AYO</span><time itemprop="dateCreated datePublished" datetime="2022-06-15T16:00:00.000Z" title="发表于 2022-06-16 00:00:00">2022-06-16</time><time itemprop="dateCreated datePublished" datetime="2022-06-15T16:00:00.000Z" title="更新于 2022-06-16 00:00:00">2022-06-16</time></header><h2 id="1-Python简介"><a href="#1-Python简介" class="headerlink" title="1 Python简介"></a>1 Python简介</h2><p>Python是一个高层次的结合了解释性、编译性、互动性和面向对象的脚本语言。</p>
<ul>
<li>解释性：这意味python在运行过程中没有编译这个过程</li>
<li>交互式：意味着可以直接运行代码而不用像c语言一样在main函数中执行代码</li>
<li>面向对象的语言：意味着python支持面向对象或代码封装的编程技术</li>
</ul>
<h2 id="2-Python编码"><a href="#2-Python编码" class="headerlink" title="2 Python编码"></a>2 Python编码</h2><ul>
<li>如果 python 源码文件 没有声明编码格式，python 解释器会默认使用 ASCII 编码</li>
<li>可以在文件头写#encoding&#x3D;gbk等修改python默认的编码格式或者# -<em>- coding: UTF-8 -</em>-修改</li>
<li>若文件中出现与编码格式不一致的字符时python解释器就会报错<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE4fbbbe82938bb6a760ff1c13178f8b8d/263"></li>
</ul>
<h2 id="3-python模块安装之pip"><a href="#3-python模块安装之pip" class="headerlink" title="3 python模块安装之pip"></a>3 python模块安装之pip</h2><ul>
<li>pip是Python的包安装程序。其实pip就是python标准库中的一个包，可以用来管理python标准库中的包，也可以用来安装非python标准库的包</li>
<li>一般python安装包已经自带pip</li>
<li>pip使用<ul>
<li>可以在cmd界面中用pip help install查看安装使用说明</li>
<li>可以直接pip install+包名来安装包</li>
<li>安装时还可以指定版本安装包,例下：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install SomePackage              # 最新版本</span><br><span class="line">pip install SomePackage==1.0.4       # 指定版本</span><br><span class="line">pip install &#x27;SomePackage&gt;=1.0.4&#x27;     # 最小版本</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>查看安装包信息<ul>
<li>pip freeze 查看已经安装的包及版本信息</li>
<li>还可以导出包信息到指定文件。如：pip freeze &gt; requirements.txt，文件名称随意；也可以使用 pip install -r requirements.txt，两者等效。</li>
</ul>
</li>
<li>包卸载<ul>
<li>卸载包命令：pip uninstall &lt;包名&gt; </li>
<li>批量卸载，把包信息导入到文件 pip uninstall -r requirements.txt</li>
</ul>
</li>
<li>包升级<ul>
<li>pip install -U &lt;包名&gt; 或：pip install &lt;包名&gt; –upgrade</li>
</ul>
</li>
<li>列出安装包<ul>
<li>pip list 查看已经安装的包及版本信息</li>
<li>pip list -o 查看可更新的包信息</li>
</ul>
</li>
<li>显示包所在目录及信息<ul>
<li>pip show &lt;包名&gt;</li>
<li>pip show -f &lt;包名&gt; 查看包的详细信息</li>
</ul>
</li>
<li>搜索包<ul>
<li>pip search &lt;关键字&gt;</li>
</ul>
</li>
</ul>
<h2 id="4-python的缩进规则"><a href="#4-python的缩进规则" class="headerlink" title="4 python的缩进规则"></a>4 python的缩进规则</h2><ul>
<li>python一般用新行作为语句的结束标识</li>
<li>python中用缩进来区分代码块</li>
<li>Python PEP8 编码规范，指导使用4个空格作为缩进。</li>
<li>但是在复杂代码中会选择用2个空格作为缩进，使代码更容易读懂</li>
<li>物理行与逻辑行区别<ul>
<li>物理行：代码编辑器中显示的代码，每一行内容是一个物理行</li>
<li>逻辑行：Python解释器对代码进行介绍，一个语句是一个逻辑行</li>
<li>相同的逻辑行要保持相同的缩进</li>
<li>“:”标记一个新的逻辑层<br>增加缩进表示进入下一个逻辑层<br>减少缩进表示返回上一个逻辑层</li>
<li>使用；可以把多个逻辑行合成一个物理行</li>
<li>使用\可以把逻辑行分成多行</li>
</ul>
</li>
</ul>
<h2 id="5-标识符"><a href="#5-标识符" class="headerlink" title="5 标识符"></a>5 标识符</h2><ul>
<li>标识符是编程时使用的名字，用于给变量、函数、语句块等命名，Python 中标识符由字母、数字、下划线组成，不能以数字开头，区分大小写。</li>
<li>以下划线开头的标识符有特殊含义<ul>
<li>_xxx ，表示不能直接访问的类属性，需通过类提供的接口进行访问，不能用 from xxx import * 导入</li>
<li>双下划线开头的标识符，如：__xx，表示私有成员</li>
<li>双下划线开头和结尾的标识符，如：__xx__，表示 Python 中内置标识，如：__init__() 表示类的构造函数</li>
</ul>
</li>
</ul>
<blockquote>
<p>python中主要存在四种命名方式：</p>
<p>1、object #公用方法</p>
<p>2、_object #半保护</p>
<p>​         #被看作是“protect”，意思是只有类对象和子类对象自己能访问到这些变量，</p>
<p>​         在模块或类外不可以使用，不能用’from module import *’导入。</p>
<p>​        #__object 是为了避免与子类的方法名称冲突， 对于该标识符描述的方法，父</p>
<p>​         类的方法不能轻易地被子类的方法覆盖，他们的名字实际上是</p>
<p>​         _classname__methodname。</p>
<p>3、_ _ object #全私有，全保护</p>
<p>​            #私有成员“private”，意思是只有类对象自己能访问，连子类对象也不能访</p>
<p>​             问到这个数据，不能用’from module import *’导入。</p>
<p>4、_ _ object_ _   #<strong>内建方法，用户不要这样定义</strong></p>
</blockquote>
<h3 id="5-1-关键字"><a href="#5-1-关键字" class="headerlink" title="5.1 关键字"></a>5.1 关键字</h3><table>
<thead>
<tr>
<th>and</th>
<th>exec</th>
<th>not</th>
<th>assert</th>
<th>finally</th>
<th>or</th>
</tr>
</thead>
<tbody><tr>
<td>break</td>
<td>for</td>
<td>pass</td>
<td>class</td>
<td>from</td>
<td>print</td>
</tr>
<tr>
<td>continue</td>
<td>global</td>
<td>raise</td>
<td>def</td>
<td>if</td>
<td>return</td>
</tr>
<tr>
<td>del</td>
<td>import</td>
<td>try</td>
<td>elif</td>
<td>in</td>
<td>while</td>
</tr>
<tr>
<td>else</td>
<td>is</td>
<td>with</td>
<td>except</td>
<td>lambda</td>
<td>yield</td>
</tr>
</tbody></table>
<ul>
<li>自定义标识符时不能使用关键字</li>
</ul>
<h2 id="6-转义字符"><a href="#6-转义字符" class="headerlink" title="6 转义字符"></a>6 转义字符</h2><ul>
<li>需要在字符中使用特殊字符时，就需要用到转义字符，在python里用反斜杠‘\’转义字符。</li>
<li>当字符串中包含反斜杠、单引号和双引号等有特殊用途的字符时，必须使用反斜杠对这些字符进行转义(转换一个含义)</li>
<li>·当字符串中包含换行、回车，水平制表符或退格等无法直接表示的特殊字符时，也可以使用转义字符当字符串中包含换行、回车，水平制表符或退格等无法直接表示的特殊字符时，也可以使用转义字符<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEeecac20fc795857c9d1044ee40249e34/36" alt="转义字符"></li>
</ul>
<h2 id="7-注释"><a href="#7-注释" class="headerlink" title="7 注释"></a>7 注释</h2><ul>
<li>Python 解释器在执行代码时会忽略注释，不做任何处理。</li>
<li>注释最大的作用就是提高代码的可读性<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE57640e77b831e56b4ece47c37972962a/56"></li>
</ul>
<h3 id="7-1-单行注释"><a href="#7-1-单行注释" class="headerlink" title="7.1 单行注释"></a>7.1 单行注释</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 注释内容</span><br></pre></td></tr></table></figure>
<h3 id="7-2-多行注释"><a href="#7-2-多行注释" class="headerlink" title="7.2 多行注释"></a>7.2 多行注释</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Python 使用三个连续的单引号&#x27;&#x27;&#x27;或者三个连续的双引号&quot;&quot;&quot;注释多行内容，如：</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">注释内容</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">注释内容</span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
<h2 id="8-输出函数"><a href="#8-输出函数" class="headerlink" title="8 输出函数"></a>8 输出函数</h2><ul>
<li>python输出函数为print，无论什么类型的数据都可以直接输出，使用如下：<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(*objects, sep=<span class="string">&#x27; &#x27;</span>, end=<span class="string">&#x27;\n&#x27;</span>, file=sys.stdout)</span><br></pre></td></tr></table></figure></li>
<li>objects参数：表示输出对象。输出多个对象时，需要用逗号分隔</li>
<li>sep参数：用来间隔多个对象</li>
<li>end参数：用来设定以什么结尾</li>
<li>file参数：要写入的文件对象<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#如果直接输出字符串，而不是用对象表示的话，可以不使用逗号</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Duan&quot;</span><span class="string">&quot;Yixuan&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Duan&quot;</span>,<span class="string">&quot;Yixuan&quot;</span>)</span><br><span class="line"> </span><br><span class="line">运行结果如下：</span><br><span class="line">DuanYixuan</span><br><span class="line">Duan Yixuan</span><br><span class="line">可知，不添加逗号分隔符，字符串之间没有间隔</span><br></pre></td></tr></table></figure></li>
<li>在输出前加r表示原样输出<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(r&#x27;\hello word&#x27;)</span><br><span class="line"># \hello word</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-1-格式化输出"><a href="#8-1-格式化输出" class="headerlink" title="8.1 格式化输出"></a>8.1 格式化输出</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE4e8ce5f715e4da45c78ca1fc1d2f3920/38" alt="格式化输出"></p>
<h3 id="8-2-精度和宽度控制"><a href="#8-2-精度和宽度控制" class="headerlink" title="8.2 精度和宽度控制"></a>8.2 精度和宽度控制</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = <span class="number">123.333</span></span><br><span class="line"><span class="comment"># 意思为f变量保留两位小数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;f:<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEcd9f63a84ec8a4691368d9fb2126a0b0/40" alt="精度和宽度控制"></p>
<ul>
<li>在“：”后分别加^,&lt;,&gt;分别表示输出居中，左对齐，右对齐</li>
<li>第二三种不可控，其他格式控制方式与C语言一样</li>
</ul>
<h3 id="8-3-转换标志"><a href="#8-3-转换标志" class="headerlink" title="8.3 转换标志"></a>8.3 转换标志</h3><ul>
<li>转换标志：-表示左对齐；+表示在数值前要加上正负号；” “(空白字符)表示正数之前保留空格()；0表示转换值若位数不够则用0填充。<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p=3.141592653</span><br><span class="line">print(&#x27;%+3.1f&#x27;%p)</span><br><span class="line"># +3.1</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p=3.141592653</span><br><span class="line">print(&#x27;%010.1f&#x27;%p)</span><br><span class="line"># 00000003.1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p=3.141592653</span><br><span class="line">print(&#x27;%-3.1f&#x27;%p)</span><br><span class="line">#3.1</span><br></pre></td></tr></table></figure>
<h3 id="8-4-格式字符归纳"><a href="#8-4-格式字符归纳" class="headerlink" title="8.4 格式字符归纳"></a>8.4 格式字符归纳</h3><table>
<thead>
<tr>
<th>格式符</th>
<th>格式符输出</th>
<th>格式符</th>
<th>格式符输出</th>
</tr>
</thead>
<tbody><tr>
<td>%s</td>
<td>字符串输出</td>
<td>%r</td>
<td>字符串输出</td>
</tr>
<tr>
<td>%c</td>
<td>单个字符输出</td>
<td>%b</td>
<td>二进制整数输出</td>
</tr>
<tr>
<td>%d</td>
<td>十进制整数输出</td>
<td>%i</td>
<td>十进制整数</td>
</tr>
<tr>
<td>%o</td>
<td>八进制整数输出</td>
<td>%x</td>
<td>十六进制整数输出</td>
</tr>
<tr>
<td>%e</td>
<td>指数输出(e为基底)</td>
<td>%E</td>
<td>上同(E为基底)</td>
</tr>
<tr>
<td>%f</td>
<td>浮点数</td>
<td>%F</td>
<td>浮点数</td>
</tr>
<tr>
<td>%g</td>
<td>指数(e)或浮点数(根据显示长度)</td>
<td>%G</td>
<td>指数(E)或浮点数(根据显示长度)</td>
</tr>
</tbody></table>
<h3 id="控制输出字体样色"><a href="#控制输出字体样色" class="headerlink" title="控制输出字体样色"></a>控制输出字体样色</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEd308fe9de58ae83f5b49cc5c1e9b7f0f/42"></p>
<h2 id="9-输入函数"><a href="#9-输入函数" class="headerlink" title="9 输入函数"></a>9 输入函数</h2><ul>
<li>python使用input()控制键盘录入<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">input(&#x27;请输入：&#x27;)</span><br><span class="line"># 请输入：</span><br></pre></td></tr></table></figure></li>
<li>一次性输入多个变量<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a,b,c=input(&#x27;请输入：&#x27;).split(&#x27;,&#x27;)</span><br><span class="line"># 录入多个数且用逗号隔开</span><br></pre></td></tr></table></figure></li>
<li>以上一种方式的类型转换<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">a,b,c=map(int,input(&#x27;请输入：&#x27;).split(&#x27;,&#x27;))</span><br><span class="line"># 这样就可以把所有数转换为int类型</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="10-变量与常量"><a href="#10-变量与常量" class="headerlink" title="10 变量与常量"></a>10 变量与常量</h2><ul>
<li>变量：一般值改变后内存地址随着改变<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEd7422ce9767529ad8574fa492723eba4/44"></li>
<li>局部变量和全局变量<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE818f00a8d6f47818af741b9c7eab873c/201"></li>
<li>常量：python没有常规意义上的常量，约定用全大写标识符表示常量，但其值还是可以改变</li>
<li>所以后来用户可以自定义类来实现常量<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"># python 3.x</span><br><span class="line"># Filename:const.py</span><br><span class="line"># 定义一个常量类实现常量的功能</span><br><span class="line"># </span><br><span class="line"># 该类定义了一个方法__setattr()__,和一个异常ConstError, ConstError类继承 </span><br><span class="line"># 自类TypeError. 通过调用类自带的字典__dict__, 判断定义的常量是否包含在字典 </span><br><span class="line"># 中。如果字典中包含此变量，将抛出异常，否则，给新创建的常量赋值。 </span><br><span class="line"># 最后两行代码的作用是把const类注册到sys.modules这个全局字典中。</span><br><span class="line">class _const:</span><br><span class="line">    class ConstError(TypeError):pass</span><br><span class="line">    def __setattr__(self,name,value):</span><br><span class="line">        if name in self.__dict__:</span><br><span class="line">            raise self.ConstError(&quot;Can&#x27;t rebind const (%s)&quot; %name)</span><br><span class="line">        self.__dict__[name]=value</span><br><span class="line">        </span><br><span class="line">import sys</span><br><span class="line">sys.modules[__name__]=_const()</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># test.py</span><br><span class="line">import const</span><br><span class="line">const.PI=3.14</span><br><span class="line">print(const.PI)</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="python变量域"><a href="#python变量域" class="headerlink" title="python变量域"></a>python变量域</h4><blockquote>
<p>python中的4种作用域 </p>
<p>L：Local，局部作用域，也就是我们在函数中定义的变量；</p>
<p>E：Enclosing，嵌套的父级函数的局部作用域，即包含此函数的上级函数的局部作用域，但不是全局的；</p>
<p>G：Globa，全局变量，就是模块级别定义的变量；</p>
<p>B：Built-in，系统内置模块里面的变量，比如int, bytearray等。</p>
<p>查找循序也是由上往下</p>
<p>当参数为可变对象时，传参采用的是引用传递，修改形参将对实参造成影响；当参数为不可变对象时，传参采用的是值传递，修改形参对实参无影响</p>
</blockquote>
<h2 id="11-数据类型"><a href="#11-数据类型" class="headerlink" title="11 数据类型"></a>11 数据类型</h2><ul>
<li>python常用数据类型：</li>
</ul>
<table>
<thead>
<tr>
<th>类型</th>
<th>类型名</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>整数类型</td>
<td>int</td>
<td>88</td>
</tr>
<tr>
<td>浮点类型</td>
<td>float</td>
<td>3.123</td>
</tr>
<tr>
<td>布尔类型</td>
<td>bool</td>
<td>True，False</td>
</tr>
<tr>
<td>字符串类型</td>
<td>str</td>
<td>‘人生苦短，我用python’</td>
</tr>
<tr>
<td>空值</td>
<td>None</td>
<td>None</td>
</tr>
</tbody></table>
<ul>
<li>整数类型：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE217d6037e5a76dc8d723675a6f69f7d6/46"></li>
<li>浮点类型：</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEefd8fda485097e3999f40c9b5428add8/48"></li>
<li>布尔类型：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE5a48619d54cb311a475f05a44d8ad1b7/51"></li>
<li>字符串类型：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEe17d5a77254e29cd1b684812fddba975/53"></li>
</ul>
<h3 id="11-1-数据类型转换"><a href="#11-1-数据类型转换" class="headerlink" title="11.1 数据类型转换"></a>11.1 数据类型转换</h3><ul>
<li>数据类型转化事项：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE787e453a8d0368364ce50660bd589ad2/58"></li>
<li>特别注意int()函数有两个参数，如果只有一个参数则转换为整数，如果有第二个参数，则为指定转换的进制<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">c=&#x27;123&#x27;</span><br><span class="line">print(int(c,16))</span><br><span class="line">#291</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="12-python运算符"><a href="#12-python运算符" class="headerlink" title="12 python运算符"></a>12 python运算符</h2><table>
<thead>
<tr>
<th>算术运算符</th>
<th>赋值运算符</th>
<th>比较运算符</th>
</tr>
</thead>
<tbody><tr>
<td>布尔运算符</td>
<td>位运算符</td>
<td>海象运算符</td>
</tr>
</tbody></table>
<ul>
<li><p>算术运算符：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE12a1cb1cdbbf9e4b5ea110b40744d2ee/60"></p>
<ul>
<li>整除一正一负向下取整</li>
</ul>
</li>
<li><p>赋值运算符：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE99a2ce18d763ef7e78c0fc47b7ed2de4/63"></p>
<ul>
<li><span style="color:red">python没有自增自减运算符，自增自减用+&#x3D;、-+实现</span></li>
</ul>
</li>
<li><p>比较运算符：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE07f3afcc74c73fcaa385b35ec5aa2117/65"></p>
</li>
<li><p>布尔运算符：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEa9a20a49c381520dc6217da6ddeebdb2/67"></p>
</li>
<li><p>位运算符：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEc733b63c1746e9ca29bb41a37dbe4bdc/69"></p>
</li>
<li><p>海象运算符</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 符号：:=</span></span><br><span class="line"><span class="comment"># 作用： 为变量赋值</span></span><br><span class="line"><span class="comment"># 一般不单独使用</span></span><br><span class="line"><span class="keyword">if</span> a:=<span class="number">20</span> &gt; <span class="number">18</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;已经成年&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="12-1-算术运算符的优先级"><a href="#12-1-算术运算符的优先级" class="headerlink" title="12.1 算术运算符的优先级"></a>12.1 算术运算符的优先级</h3><ul>
<li>算术运算符优先级：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE16b47a4f4baebf56738897ec53655aa5/71"></li>
</ul>
<h3 id="12-2-对象的布尔值"><a href="#12-2-对象的布尔值" class="headerlink" title="12.2 对象的布尔值"></a>12.2 对象的布尔值</h3><ul>
<li>python一切皆对象，所有对象都有一个布尔值<ul>
<li>可以使用内置函数bool()获取对象的布尔值</li>
</ul>
</li>
<li>布尔值为False的对象：</li>
</ul>
<table>
<thead>
<tr>
<th>False</th>
<th>数值0</th>
<th>None</th>
<th>空字符串</th>
</tr>
</thead>
<tbody><tr>
<td>空列表</td>
<td>空元组</td>
<td>空字典</td>
<td>空字典</td>
</tr>
</tbody></table>
<ul>
<li>其他对象布尔值为True</li>
</ul>
<h2 id="13-选择结构"><a href="#13-选择结构" class="headerlink" title="13 选择结构"></a>13 选择结构</h2><ul>
<li>语法结构：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEe5862c555b27912d8536962696aeb99f/75"><ul>
<li>python的选择条件可以使用数学方式表达：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 与c不一样，c不能连续比较</span><br><span class="line">if 90&lt;=score&lt;=100</span><br></pre></td></tr></table></figure></li>
<li><span style="color:red">else后面不能接条件，只能接：</span><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if 100&gt;90:</span><br><span class="line">  print(&#x27;小于&#x27;)</span><br><span class="line">else:</span><br><span class="line">  print(&#x27;大于&#x27;)</span><br></pre></td></tr></table></figure></li>
<li>嵌套if<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE818690e15a1dcfb143fcc7ed37b7e5c8/78"></li>
</ul>
</li>
</ul>
<h3 id="13-1-条件表达式"><a href="#13-1-条件表达式" class="headerlink" title="13.1 条件表达式"></a>13.1 条件表达式</h3><ul>
<li>基本语法：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(100 if 100&gt;90 else 90)</span><br><span class="line"># 输出100</span><br><span class="line"># if判断条件为True输出前面，否则输出后面</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="13-2-pass语句"><a href="#13-2-pass语句" class="headerlink" title="13.2 pass语句"></a>13.2 pass语句</h3><ul>
<li>pass简介<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE40ff3cef36f6c2b30cc05ce5308d988c/82"></li>
</ul>
<h2 id="14-循环结构"><a href="#14-循环结构" class="headerlink" title="14 循环结构"></a>14 循环结构</h2><h3 id="14-1-range函数"><a href="#14-1-range函数" class="headerlink" title="14.1 range函数"></a>14.1 range函数</h3><ul>
<li>用于生成一个整数序列,默认从0开始</li>
<li>基础语法：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE27ad54c6061600829c6ba8660a8dcffa/84"></li>
</ul>
<h3 id="14-2-while循环"><a href="#14-2-while循环" class="headerlink" title="14.2 while循环"></a>14.2 while循环</h3><ul>
<li>基础语法：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">i=0</span><br><span class="line">while i&lt;5:</span><br><span class="line">    print(i)</span><br><span class="line">    i+=1</span><br><span class="line"># 0 1 2 3 4</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="14-3-for-in循环"><a href="#14-3-for-in循环" class="headerlink" title="14.3 for-in循环"></a>14.3 for-in循环</h3><ul>
<li>基础语法：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE595917ac60e810125a528f1ee524c653/86"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for i in range(3):</span><br><span class="line">  print(i)</span><br><span class="line"># 0 1 2</span><br></pre></td></tr></table></figure>
<ul>
<li>不需要变量时：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for _ in range(3):</span><br><span class="line">  print(&#x27;人生苦短，我用python&#x27;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="14-4-流程控制语句"><a href="#14-4-流程控制语句" class="headerlink" title="14.4 流程控制语句"></a>14.4 流程控制语句</h3><ul>
<li>break语句<ul>
<li>基础语法：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE3fd86b513e45aec22e9b943b2ffdae43/88"></li>
</ul>
</li>
<li>continue语句：<ul>
<li>基础语法：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE37b2df520d9d1ea76e5c3fa8bf6cd238/90"></li>
</ul>
</li>
<li>else语句：<ul>
<li>基础语法：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE3e20ea0ef5e7cdce7e657da634fa581c/92"></li>
</ul>
</li>
</ul>
<h3 id="14-5-循环总结"><a href="#14-5-循环总结" class="headerlink" title="14.5 循环总结"></a>14.5 循环总结</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEad7e8982c3b963ae258a5f7daf901141/94"></p>
<h2 id="15-列表"><a href="#15-列表" class="headerlink" title="15 列表"></a>15 列表</h2><ul>
<li>列表可存储不同类型的值</li>
</ul>
<h3 id="15-1-列表的基本操作"><a href="#15-1-列表的基本操作" class="headerlink" title="15.1 列表的基本操作"></a>15.1 列表的基本操作</h3><ul>
<li><p>创建列表：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r=[12,&quot;i&quot;]</span><br><span class="line">print(r)</span><br><span class="line"># [12, &#x27;i&#x27;]</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">r=list(&#x27;1234&#x27;)</span><br><span class="line">print(r)</span><br><span class="line"># [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;]</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE6a0ec04e67a7074d5324289cabe84e9e/97"></p>
</li>
<li><p>列表的特点：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEc9f516c67b5ba333328791d9a6205fa2/99"></p>
</li>
<li><p>获取列表指定元素的索引(index()函数)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l=[1,2,3]</span><br><span class="line">print(l.index(1))</span><br><span class="line"># 0</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEbe5ee498077ba4c201f8c4e09f8ea7f3/101"></p>
</li>
<li><p>获取列表的多个元素(切片)<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEc061be075f9bafbb830a3a3da99e93b1/103"></p>
<ul>
<li><span style="color:red">切片会产生新的列表</span><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l=[1,2,3]</span><br><span class="line">print(l[1:])</span><br><span class="line"># [2, 3]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>列表查询与遍历<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE24451db85fc31a64deb1e002bd8a2dc7/105"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l=[1,2,3]</span><br><span class="line">print(1 in l)</span><br><span class="line"># True</span><br></pre></td></tr></table></figure></li>
<li><p>列表的增加操作<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE86aab53ed92e767d72d6737c05acb43c/108"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l=[1,2,3]</span><br><span class="line"># 在末尾加一个元素</span><br><span class="line">l.append(4)</span><br><span class="line">print(l)</span><br><span class="line"># 在末尾加任意多元素，参数为列表</span><br><span class="line">l.extend([5,6])</span><br><span class="line">print(l)</span><br><span class="line"># 在第6个位置加上一个7元素</span><br><span class="line">l.insert(6,7)</span><br><span class="line">print(l)</span><br><span class="line"># 切片，把切出去的部分用新列表替换</span><br><span class="line">l[1:]=[8]</span><br><span class="line">print(l)</span><br></pre></td></tr></table></figure></li>
<li><p>列表的删除</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE3c06465cffd4a6f4c35d33871a975786/110"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l=[1,1,2,3]</span><br><span class="line"># 删除1元素</span><br><span class="line">l.remove(1)</span><br><span class="line">print(l)</span><br><span class="line"># 删除第0个元素，若不指定则删除最后一个元素</span><br><span class="line">l.pop(0)</span><br><span class="line">print(l)</span><br><span class="line"># 切片出第0个到第1个元素</span><br><span class="line">print(l[0:1])</span><br><span class="line"># 清除全部元素</span><br><span class="line">l.clear()</span><br><span class="line">print(l)</span><br><span class="line"># 删除列表</span><br><span class="line">del(l)</span><br><span class="line">print(l)</span><br><span class="line">23</span><br><span class="line"></span><br><span class="line"># [1, 2, 3]</span><br><span class="line"># [2, 3]</span><br><span class="line"># [2]</span><br><span class="line"># []</span><br><span class="line"># 报错，没有l变量</span><br></pre></td></tr></table></figure></li>
<li><p>列表的排序<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE97040877b730b6b8ad722e7e3dbb30ff/112"></p>
<ul>
<li><span style="color:red">sort()不会产生新列表对象</span></li>
<li><span style="color:red">sorted()会产生新的列表对象</span><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">l=[3,2,1]</span><br><span class="line"># 不会产生新对象</span><br><span class="line">l.sort()</span><br><span class="line">print(l)</span><br><span class="line"># 会产生新对象</span><br><span class="line">r=sorted(l)</span><br><span class="line">print(l)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>列表生成式</p>
<ul>
<li>基本语法：<ul>
<li>i for i in 迭代器<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 生成一个1-9元素的列表</span><br><span class="line">lst=[i for i in range(1,10)]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="16-字典"><a href="#16-字典" class="headerlink" title="16 字典"></a>16 字典</h2><ul>
<li>以键值对的方式无序存储数据<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE2860bb228b2cd9332f3cc547ddaefbad/114"></li>
<li>把key进过哈希函数计算得出位置</li>
<li>key要求为不可变序列</li>
<li>key不可重复</li>
</ul>
<h3 id="16-1-字典的基本操作"><a href="#16-1-字典的基本操作" class="headerlink" title="16.1 字典的基本操作"></a>16.1 字典的基本操作</h3><ul>
<li><p>创建字典：</p>
<ul>
<li>dict.fromkeys(seq,value)-&gt;dict:以序列 seq 中元素做字典的键，value 为字典所有键对应的初始值</li>
</ul>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEc4a23634eae157747da8011d9b67c41e/116"></p>
</li>
<li><p>字典元素的获取<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE503dec4b8ea7c630f56bc7bef15025e5/118"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#123;&quot;张三&quot;:100&#125;</span><br><span class="line">t=s[&quot;张三&quot;]</span><br><span class="line">print(t)</span><br><span class="line"># 设置默认查找值，当查字典没有的元素时返回默认值</span><br><span class="line">t=s.get(&quot;lisi&quot;,99)</span><br><span class="line">print(t)</span><br><span class="line">#100</span><br><span class="line">#99</span><br></pre></td></tr></table></figure>
</li>
<li><p>key的判断、元素删除、元素新增<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEcaae41436464700c81949d7a0113b421/123"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE51de5844f0f30e97861758a66887b4d0/127"></p>
</li>
<li><p>获取字典视图<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE8c646ecd280392b0e0d01f596828547c/129"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#123;&quot;张三&quot;:100&#125;</span><br><span class="line"># 获取所有key</span><br><span class="line">print(s.keys())</span><br><span class="line"># 获取所有值</span><br><span class="line">print(s.values())</span><br><span class="line"># 获取所有键值对</span><br><span class="line">print(s.items())</span><br><span class="line">#dict_keys([&#x27;张三&#x27;])</span><br><span class="line"># dict_values([100])</span><br><span class="line"># dict_items([(&#x27;张三&#x27;, 100)])</span><br></pre></td></tr></table></figure>
</li>
<li><p>字典遍历</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#123;&quot;张三&quot;:100&#125;</span><br><span class="line"># item 获取的是key</span><br><span class="line"># s[item]获取值</span><br><span class="line">for item in s:</span><br><span class="line">  print(item)</span><br><span class="line">  print(s[item])</span><br></pre></td></tr></table></figure>
</li>
<li><p>字典生成式<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE319b778bcbf38a638f1ed92556c5d3bf/131"></p>
<ul>
<li>基本语法<ul>
<li>for({列表:列表 for 列表,列表 in zip(列表, 列表)})<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=[1,2,3]</span><br><span class="line">t=[4,5]</span><br><span class="line">print(&#123;s: t for s, t in zip(s, t)&#125;)</span><br></pre></td></tr></table></figure></li>
<li>若zip打包的两个列表元素数目不一样，则按元素数目少的列表打包</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="16-2-字典总结"><a href="#16-2-字典总结" class="headerlink" title="16.2 字典总结"></a>16.2 字典总结</h3><p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEe0991b5060404610089f1f01d8638c64/135"></p>
<h2 id="17-元组"><a href="#17-元组" class="headerlink" title="17 元组"></a>17 元组</h2><ul>
<li>是一个不可变序列</li>
</ul>
<h3 id="17-1-元组的基本操作"><a href="#17-1-元组的基本操作" class="headerlink" title="17.1 元组的基本操作"></a>17.1 元组的基本操作</h3><ul>
<li>元组的创建<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE6afca4ff77523ba363f1d5baf0ddf3da/137"><ul>
<li><span style="color:red">第一种方式可以省略小括号</span></li>
<li><span style="color:red">第三种方式如果省略逗号，会被认为是元素原来的类型</span></li>
</ul>
</li>
<li>为什么要把元组设计成不可变序列？<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEeb4d4a369d98fa0676d318e4f010def4/139"></li>
<li>遍历元组：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t=1,2,3,4</span><br><span class="line">for i in t:</span><br><span class="line">  print(i)</span><br></pre></td></tr></table></figure></li>
<li>元组生成式<ul>
<li><span style="color:red">元组没有生成式</span></li>
</ul>
</li>
</ul>
<h2 id="18-集合"><a href="#18-集合" class="headerlink" title="18 集合"></a>18 集合</h2><ul>
<li>集合是没有value的字典<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEae1375426c1fd4d3df0fa7e51bdef4f0/141"></li>
</ul>
<h3 id="18-1-集合的基本操作"><a href="#18-1-集合的基本操作" class="headerlink" title="18.1 集合的基本操作"></a>18.1 集合的基本操作</h3><ul>
<li>集合的创建<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE97e1804fd483a9fe8f778eead82fbe3a/145"><ul>
<li><span style="color:red">集合的元素不能重复</span></li>
<li><span style="color:red">空集合创建只能用内置函数进行设置</span></li>
</ul>
</li>
<li>集合的判断，新增，删除<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEdf40eb50bfd2eea103699fe8404deb7d/147"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#123;1,2,3&#125;</span><br><span class="line"># 末尾增加一个元素</span><br><span class="line">s.add(4)</span><br><span class="line">print(s)</span><br><span class="line"># 末尾至少增加一个元素</span><br><span class="line">s.update([5])</span><br><span class="line">print(s)</span><br><span class="line"># 删除一个指定元素</span><br><span class="line">s.remove(2)</span><br><span class="line">print(s)</span><br><span class="line"># 删除一个指定元素</span><br><span class="line">s.discard(1)</span><br><span class="line">print(s)</span><br><span class="line"># 一次删除头部一个元素</span><br><span class="line">s.pop()</span><br><span class="line">print(s)</span><br><span class="line"># 清空元素</span><br><span class="line">s.clear()</span><br></pre></td></tr></table></figure></li>
<li>集合间的关系<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE952d1e1318b9b762176df62bd100bd70/151"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#123;1,2,3,4&#125;</span><br><span class="line">t=&#123;3,4&#125;</span><br><span class="line"># 判断集合是否相等</span><br><span class="line">print(s==t)</span><br><span class="line"># 判断集合t是否是集合s的子集</span><br><span class="line">print(t.issubset(s))</span><br><span class="line"># 判断集合s的父集是否是t</span><br><span class="line">print(s.issuperset(t))</span><br><span class="line"># 判断两个集合是否是没有交集</span><br><span class="line">print(s.isdisjoint(t))</span><br><span class="line"></span><br><span class="line">#False</span><br><span class="line">#True</span><br><span class="line">#True</span><br><span class="line">#False</span><br></pre></td></tr></table></figure></li>
<li>集合的数学操作<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEafe7517e38041ad6098218def04b0eef/155"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#123;1,2,3,4&#125;</span><br><span class="line">t=&#123;3,4,5,6&#125;</span><br><span class="line"># 集合的交集</span><br><span class="line">print(s.intersection(t))</span><br><span class="line">print(s&amp;t)</span><br><span class="line"></span><br><span class="line"># 集合的并集</span><br><span class="line">print(s.union(t))</span><br><span class="line">print(s|t)</span><br><span class="line"></span><br><span class="line"># 集合的差集</span><br><span class="line">print(s.difference(t))</span><br><span class="line">print(s-t)</span><br><span class="line"></span><br><span class="line"># 集合的对称差集</span><br><span class="line">print(s.symmetric_difference(t))</span><br><span class="line">print(s^t)</span><br></pre></td></tr></table></figure></li>
<li>集合生成式<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE812bd0086924a7269ff3497c2cb51a35/157"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(&#123;i for i in range(1,10)&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="18-2-元组与集合总结"><a href="#18-2-元组与集合总结" class="headerlink" title="18.2 元组与集合总结"></a>18.2 元组与集合总结</h3><p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEa06fb5fc04f1c5fa393db6920a94becb/160"></p>
<h2 id="19-序列总结"><a href="#19-序列总结" class="headerlink" title="19 序列总结"></a>19 序列总结</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE0d47ed486da56f639399e51c379dc7e5/162"></p>
<ul>
<li><span style="color:red">不可变序列还有字符串</span></li>
</ul>
<blockquote>
<p>可变对象和不可变对象的区别：</p>
<ul>
<li>可变对象：改变对象内容，对象在内存中的地址<code>不会</code>被改变</li>
<li>不可变对象：改下对象内容，对象在内存中的地址会被改变；如果必须存储一个不同的值，则必须创建新的对象</li>
</ul>
</blockquote>
<h2 id="20-字符串"><a href="#20-字符串" class="headerlink" title="20 字符串"></a>20 字符串</h2><ul>
<li>python基本数据类型，是一个不可变序列</li>
</ul>
<h3 id="20-1-字符串的驻留机制"><a href="#20-1-字符串的驻留机制" class="headerlink" title="20.1 字符串的驻留机制"></a>20.1 字符串的驻留机制</h3><ul>
<li>基本概述<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE84bbd5708a1c03ac5149f9f87f82a71d/165"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE5abc5c09aedb97e3b64e9ad9e6e7f367/167"><ul>
<li><span style="color:red">pycharm中对字符串的驻留机制进行了优化，只要是字符串都可以驻留</span></li>
</ul>
</li>
<li>驻留机制优缺点<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE0dafb644fe2f97462c17e1e63d4b2c26/169"></li>
</ul>
<h3 id="20-2-字符串的操作"><a href="#20-2-字符串的操作" class="headerlink" title="20.2 字符串的操作"></a>20.2 字符串的操作</h3><ul>
<li>字符串的查询<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEf3a1af860c2b651b8117c1680e45467d/171"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;python人生苦短，我用python&#x27;</span><br><span class="line"># 查找子串第一次出现的位置，无子串报错</span><br><span class="line">print(s.index(&#x27;python&#x27;))</span><br><span class="line"># 查找子串最后一次出现的位置，无子串报错</span><br><span class="line">print(s.rindex(&#x27;python&#x27;))</span><br><span class="line"># 查找子串第一次出现的位置，无子串返回-1</span><br><span class="line">print(s.find(&#x27;python&#x27;))</span><br><span class="line"># 查找子串最后一次出现的位置，无子串返回-1</span><br><span class="line">print(s.rfind(&#x27;python&#x27;))</span><br><span class="line"></span><br><span class="line">#0</span><br><span class="line">#13</span><br><span class="line">#0</span><br><span class="line">#13</span><br></pre></td></tr></table></figure></li>
<li>字符串的大小写转换<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE6a0cba1ccdc4d16f635d1b1bc28ad2eb/173"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;人生苦短python，我用Python&#x27;</span><br><span class="line"># 全部字符转换为大写</span><br><span class="line">print(s.upper())</span><br><span class="line"># 全部字符转换为小写</span><br><span class="line">print(s.lower())</span><br><span class="line"># 大写转小写，小写转大写</span><br><span class="line">print(s.swapcase())</span><br><span class="line"># 第一个字符转换为大写，其他字符转换为小写</span><br><span class="line">print(s.capitalize())</span><br><span class="line"># 把每个单词第一个字母大写，其他为小写</span><br><span class="line">print(s.title())</span><br><span class="line"></span><br><span class="line"># 人生苦短PYTHON，我用PYTHON</span><br><span class="line"># 人生苦短python，我用python</span><br><span class="line"># 人生苦短PYTHON，我用pYTHON</span><br><span class="line"># 人生苦短python，我用python</span><br><span class="line"># 人生苦短Python，我用Python</span><br></pre></td></tr></table></figure></li>
<li>字符串对齐<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEa37d7ecf20b94af52f021efe9689090d/175"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;人生苦短python，我用Python&#x27;</span><br><span class="line"># 居中</span><br><span class="line">print(s.center(48))</span><br><span class="line"># 右对齐</span><br><span class="line">print(s.rjust(48))</span><br><span class="line"># 左对齐</span><br><span class="line">print(s.ljust(48))</span><br><span class="line"># 右对齐</span><br><span class="line">print(s.zfill(48))</span><br></pre></td></tr></table></figure>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE3843d9955194f778ca239b08cabc753a/177"></li>
<li>字符串的劈分<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE60df8a3db3b00b9a6363a37d9256eab5/180"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;hello,world &#x27;</span><br><span class="line">print(s.split(sep=&#x27;,&#x27;,maxsplit=1))</span><br><span class="line"></span><br><span class="line"># [&#x27;hello&#x27;, &#x27;world &#x27;]</span><br><span class="line"># 对于split函数，对于分隔符出现在首尾的情况，在首尾处分割，会产生同一个空串（有几个分隔符就有几个空串），对于出现在字符串中间的情况，单独出现，和普通情况没有区别，如果出现多个，两个分隔符中间就会产生一个空串。</span><br></pre></td></tr></table></figure></li>
<li>字符串的判断<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE9cefc214a1ad37b7c6f2ce3defb26c1e/182"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;hello2022&#x27;</span><br><span class="line"># 判断是否为合法的标识符</span><br><span class="line">print(s.isidentifier())</span><br><span class="line"># 判断是否全由空白字符组成</span><br><span class="line">print(s.isspace())</span><br><span class="line"># 判断是否全为字母</span><br><span class="line">print(s.isalpha())</span><br><span class="line"># 判断是否全为十进制数字</span><br><span class="line">print(s.isdecimal())</span><br><span class="line"># 判断是否全为数字</span><br><span class="line">print(s.isnumeric())</span><br><span class="line"># 判断是否全为字母和数字</span><br><span class="line">print(s.isalnum())</span><br><span class="line"></span><br><span class="line">#True</span><br><span class="line">#False</span><br><span class="line">#False</span><br><span class="line">#False</span><br><span class="line">#False</span><br><span class="line">#True</span><br></pre></td></tr></table></figure></li>
<li>字符串的替换与合并<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEb8ad6bc47e92d2392fe1468408b3c719/186"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;hello2022&#x27;</span><br><span class="line">lst=[&quot;1,2,3&quot;,&#x27;木头人&#x27;]</span><br><span class="line"># 将指定子串替换</span><br><span class="line">print(s.replace(&#x27;2&#x27;,&#x27;1&#x27;))</span><br><span class="line"># 在每两个列表元素中间加一个字符串</span><br><span class="line">print(s.join(lst))</span><br><span class="line"></span><br><span class="line"># hello1011</span><br><span class="line"># 1,2,3hello2022木头人</span><br></pre></td></tr></table></figure></li>
<li>字符串的比较<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEf45e8014ec0207b5b71df691d7035ce4/188"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;hello2022&#x27;</span><br><span class="line">r=&#x27;H&#x27;</span><br><span class="line">print(s&gt;r)</span><br><span class="line">print(s&gt;=r)</span><br><span class="line">print(s&lt;r)</span><br><span class="line">print(s&lt;=r)</span><br><span class="line">print(s==r)</span><br><span class="line">print(s!=r)</span><br><span class="line"></span><br><span class="line"># True</span><br><span class="line"># True</span><br><span class="line"># False</span><br><span class="line"># False</span><br><span class="line"># False</span><br><span class="line"># True</span><br></pre></td></tr></table></figure></li>
<li>字符串的切片<ul>
<li><span style="color:red">由于字符串是不可变序列，字符串的增删改切片等操作都会产生新的对象</span></li>
</ul>
</li>
<li>字符串的编码转换<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE1a1079ba88fe586997eb0354da3600a8/190"><ul>
<li>字符串的编码<ul>
<li>使用str类的encode方法</li>
</ul>
</li>
<li>字符串的解码<ul>
<li>使用decode方法<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">s=&#x27;天涯共此时&#x27;</span><br><span class="line"># 编码</span><br><span class="line">print(s.encode(encoding=&#x27;GBK&#x27;))</span><br><span class="line">print(s.encode(encoding=&#x27;UTF-8&#x27;))</span><br><span class="line"># 解码</span><br><span class="line">r=s.encode(encoding=&#x27;GBK&#x27;)</span><br><span class="line">print(r.decode(encoding=&#x27;GBK&#x27;))</span><br><span class="line"></span><br><span class="line"># b&#x27;\xcc\xec\xd1\xc4\xb9\xb2\xb4\xcb\xca\xb1&#x27;</span><br><span class="line"># b&#x27;\xe5\xa4\xa9\xe6\xb6\xaf\xe5\x85\xb1\xe6\xad\xa4\xe6\x97\xb6&#x27;</span><br><span class="line"># 天涯共此时</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><span style="color:red">编码和解码所使用的的字符编码必须一致否则会报错</span></li>
</ul>
</li>
</ul>
<h2 id="21-函数"><a href="#21-函数" class="headerlink" title="21 函数"></a>21 函数</h2><ul>
<li><p>函数就是执行特定任务和完成特定功能的一段代码</p>
</li>
<li><p>函数的好处  </p>
<ol>
<li>复用代码</li>
<li>隐藏实现细节</li>
<li>提高可维护性</li>
<li>提高可读性便于调试</li>
</ol>
</li>
<li><p>函数的创建</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def 函数名(输入参数):</span><br><span class="line">  函数体</span><br><span class="line">  [return xxx]</span><br></pre></td></tr></table></figure></li>
<li><p>函数参数传递<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEa9476e3daafdea45d1d796d2d30e1a4e/193"></p>
<ul>
<li>默认值参数<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE7401f85fbae959b66db04d99e4870071/195"></li>
<li>其他类型参数<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE18772efb889319e14f0e4885f925baec/197"><ul>
<li><span style="color:red">如果两个参数都有，则可边的位置参数要在可变的关键字参数前面</span></li>
<li><span style="color:red">当*args，**kwargs接受参数后，*args意思为把args元组里的数据打散为位置参数，**kwargs为把kwargs字典里的数据打散为关键字参数</span></li>
</ul>
</li>
</ul>
</li>
<li><p>参数总结<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEaf307d421b3208077f82eb696a86b3b3/199"> </p>
</li>
<li><p>函数内存分析</p>
<ul>
<li>如果不可变对象，那么在函数体内的修改不会影响实参的值，如果是可变对象，在函数体的修改会影响到实参</li>
</ul>
</li>
<li><p>函数的返回值</p>
<ul>
<li>python支持多返回值<ol>
<li>如果函数没有返回值，return可以省略不写</li>
<li>函数的返回值如果是一个直接返回类型</li>
<li>函数的返回值如果是多个，返回的结果是一个元组</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="21-1-递归函数"><a href="#21-1-递归函数" class="headerlink" title="21.1 递归函数"></a>21.1 递归函数</h3><ul>
<li>如果一个函数的函数体调用了函数本身，这个函数就被称为递归函数<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEeb3cf823917a1ba592c55212b71fcabc/203"></li>
</ul>
<h3 id="21-2-lambda表达式"><a href="#21-2-lambda表达式" class="headerlink" title="21.2 lambda表达式"></a>21.2 lambda表达式</h3><p>python使用lambda来创建匿名函数</p>
<ul>
<li>lambda只是一个表达式，函数体比def简单很多</li>
<li>lambda的主体只是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去</li>
<li>lambda函数拥有自己的命名空间，且不能访问自有参数列表之外或全局命名空间里的参数</li>
</ul>
<h4 id="21-2-1-语法"><a href="#21-2-1-语法" class="headerlink" title="21.2.1 语法"></a>21.2.1 语法</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">lambda</span> [arg1[,arg2....]]:expression</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例</span></span><br><span class="line"><span class="built_in">sum</span> = <span class="keyword">lambda</span> x, y: <span class="built_in">print</span>(x+y)</span><br><span class="line"><span class="built_in">sum</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>

<h3 id="21-3-函数文档"><a href="#21-3-函数文档" class="headerlink" title="21.3 函数文档"></a>21.3 函数文档</h3><blockquote>
<p>使用help()内置函数来查看函数文档</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">help</span>(<span class="built_in">print</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">help</span>(<span class="built_in">print</span>.__doc__))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">print(...)</span></span><br><span class="line"><span class="string">	# 函数原型</span></span><br><span class="line"><span class="string">    print(value, ..., sep=&#x27; &#x27;, end=&#x27;\n&#x27;, file=sys.stdout, flush=False)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    # 函数功能</span></span><br><span class="line"><span class="string">    Prints the values to a stream, or to sys.stdout by default.</span></span><br><span class="line"><span class="string">    # 参数解释</span></span><br><span class="line"><span class="string">    Optional keyword arguments:</span></span><br><span class="line"><span class="string">    file:  a file-like object (stream); defaults to the current sys.stdout.</span></span><br><span class="line"><span class="string">    sep:   string inserted between values, default a space.</span></span><br><span class="line"><span class="string">    end:   string appended after the last value, default a newline.</span></span><br><span class="line"><span class="string">    flush: whether to forcibly flush the stream.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">None</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编写函数文档</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">exchange</span>(<span class="params">dollar, rate=<span class="number">6.32</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    功能：汇率转换</span></span><br><span class="line"><span class="string">    :param dollar: 美元数</span></span><br><span class="line"><span class="string">    :param rate: 汇率</span></span><br><span class="line"><span class="string">    :return: 人民币数量</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> dollar * rate</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">exchange(dollar, rate=6.32)</span></span><br><span class="line"><span class="string">    功能：汇率转换</span></span><br><span class="line"><span class="string">    :param dollar: 美元数</span></span><br><span class="line"><span class="string">    :param rate: 汇率</span></span><br><span class="line"><span class="string">    :return: 人民币数量</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>



<h2 id="22-异常处理机制"><a href="#22-异常处理机制" class="headerlink" title="22 异常处理机制"></a>22 异常处理机制</h2><ul>
<li>被动掉坑类型(try-expect)<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEe7ea59f16214de0d48f646f30109789e/205"><ul>
<li><span style="color:red">当存在多个expect结构时应该按照先子类再父类的顺序捕获异常，为避免遗漏可能出现的异常，可以在最后加BaseException</span></li>
</ul>
</li>
<li>try-except-else:<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE735061465b46f23989a8f402dcc974ea/207"></li>
<li>try-except-else-finally:<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE84e8df24fd6214ed3d4c8054cd434029/209"></li>
<li>python常见的BUG类型<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE7f14ed94635e2cb4e27eca85194c3cfc/211"></li>
<li>traceback模块<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/95f72949-999a-45a9-b7a6-ab1ed86729ec-10865085.jpg"><ul>
<li>可以把异常打印在日记文件中</li>
</ul>
</li>
<li>手动抛出异常<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if 0&lt;=score&lt;=100:</span><br><span class="line">  print(&#x27;分数为：&#x27;,score)</span><br><span class="line">else:</span><br><span class="line">  raise Exception(&#x27;分数不正确&#x27;)</span><br></pre></td></tr></table></figure>
<ul>
<li>当没有try语句时，异常由python捕获</li>
</ul>
</li>
</ul>
<h3 id="22-1-raise语句"><a href="#22-1-raise语句" class="headerlink" title="22.1 raise语句"></a>22.1 raise语句</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 语法</span></span><br><span class="line"><span class="keyword">raise</span> 错误类型(打印的错误语句)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接抛出错误，以及打印错误语句</span></span><br></pre></td></tr></table></figure>



<h3 id="22-2-BUG总结"><a href="#22-2-BUG总结" class="headerlink" title="22.2 BUG总结"></a>22.2 BUG总结</h3><p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEc8d864ceb27b6f4bddef4aaf721b6739/215"></p>
<h2 id="23-python类"><a href="#23-python类" class="headerlink" title="23 python类"></a>23 python类</h2><ul>
<li><p>创建python类<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEabbf9edb3f3ad529d19b0c3e3d13f602/217"></p>
<ul>
<li>类之外的叫函数，类里面的叫方法</li>
<li><span style="color:red">类属性，类方法，静态方法都可以直接类名.属性名调用，不需要创建对象</span></li>
</ul>
</li>
<li><p>对象的创建<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/4ff3f4b8-f99b-4ed7-a280-25824e27668f-10865085.jpg"></p>
</li>
<li><p>动态绑定属性和方法</p>
<blockquote>
<p>在python类中，可以使用__slots__变量限制实例对象的属性和方法</p>
<p>如果子类中没有定义__slots__属性，则不会继承父类的__slots__属性，如果定义了该属性，则子类对象允许的实例属性包括子类加上父类的限制</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">__slots__ = (<span class="string">&#x27;_name&#x27;</span>, <span class="string">&#x27;_age&#x27;</span>, <span class="string">&#x27;_gender&#x27;</span>,<span class="string">&#x27;show&#x27;</span>)</span><br></pre></td></tr></table></figure></blockquote>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/7f52b4a2-4000-4d98-bdfb-841a94e252c5-10865085.jpg"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/1e4b79bf-1b2a-4a27-81e2-260e9128f9de-10865085.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Student:</span><br><span class="line">  def __init__(self,name,age):</span><br><span class="line">      self.name=name</span><br><span class="line">      self.age=age</span><br><span class="line">  def show(self):</span><br><span class="line">      print(&#x27;我是&#123;&#125;,今年&#123;&#125;&#x27;.format(self.name,self.age))</span><br><span class="line">def show():</span><br><span class="line">    print(&#x27;我是函数&#x27;)</span><br><span class="line">stu=Student(&#x27;李磊&#x27;,20)</span><br><span class="line">stu.show()</span><br><span class="line">stu.show=show</span><br><span class="line">stu.show()</span><br><span class="line"></span><br><span class="line">#我是李磊,今年20</span><br><span class="line">#我是函数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>抽象类</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在python中并没有像java一样很好的支持抽象类</span></span><br><span class="line"><span class="comment"># 所以要导入abc库中的`ABCMeta`元类和`abstractmethod`包装器来负责设置抽象类和抽象方法</span></span><br><span class="line"><span class="comment"># 当一个类中有抽象方法时，该类无法实例化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> abstractmethod, ABCMeta</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="built_in">object</span>, metaclass=ABCMeta):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self._age = <span class="number">18</span></span><br><span class="line">        self._name = <span class="string">&#x27;1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">voice</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">voice</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
<li><p>运算符重载</p>
</li>
</ul>
<p>​    在python中在类里通过重写内置运算符函数啦重载运算符</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ex0716.py  加法运算符重载和减法运算符重载的实现</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computing</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,value</span>):</span><br><span class="line">        self.value = value</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">        lst = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.value:</span><br><span class="line">            lst.append(i+other)<span class="comment">#在列表末尾添加新的对象</span></span><br><span class="line">        <span class="keyword">return</span> lst</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__sub__</span>(<span class="params">self, other</span>):</span><br><span class="line">        lst = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.value:</span><br><span class="line">            lst.append(i-other)</span><br><span class="line">        <span class="keyword">return</span> lst</span><br><span class="line"></span><br><span class="line">c = Computing([-<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;+运算符重载后的列表&quot;</span>,c+<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-运算符重载后的列表&quot;</span>,c-<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># +运算符重载后的列表 [2, 2, 2, 2]</span></span><br><span class="line"><span class="comment"># -运算符重载后的列表 [-3, 1, 2, 3]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>类中内置方法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">若要表现像个序列，必须满足序列的两个方法：__len__和__getitem__，类中如果没有实现__len__，因此不满足序列协议；对对象的迭代需要调用__iter__，如果没有定义该方法，python会调用__getitem__()，让迭代和in运算符可用；根据索引访问对象元素，会调用__getitem__()</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="23-1-类总结"><a href="#23-1-类总结" class="headerlink" title="23.1 类总结"></a>23.1 类总结</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/10f3d02a-8fab-4fe5-842f-a0b348c68030-10865085.jpg"></p>
<h2 id="24-面向对象的三大特征"><a href="#24-面向对象的三大特征" class="headerlink" title="24 面向对象的三大特征"></a>24 面向对象的三大特征</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE3816b414a56f2a5ceed525c094afd970/224"></p>
<h3 id="24-1-封装"><a href="#24-1-封装" class="headerlink" title="24.1 封装"></a>24.1 封装</h3><ul>
<li>python没有专门的封装关键字，所以在属性名前用__表示私有<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class A:</span><br><span class="line">    __place=&quot;吉林&quot;</span><br><span class="line"># 列出A中所有属性</span><br><span class="line">print(dir(A))</span><br><span class="line">print(A._A__place)</span><br><span class="line"># [&#x27;_A__place&#x27;]</span><br><span class="line"># 吉林</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="24-2-继承"><a href="#24-2-继承" class="headerlink" title="24.2 继承"></a>24.2 继承</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/b24237eb-e598-4929-b307-2f46a04faff8-10865085.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class A:</span><br><span class="line">    pass</span><br><span class="line">class B:</span><br><span class="line">    pass</span><br><span class="line"># 继承A，B类 </span><br><span class="line">class C(A,B):</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<ul>
<li>方法重写<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/4a859c27-d005-490e-a579-a7ebe5855fec-10865085.jpg"></li>
</ul>
<h3 id="24-3-object类"><a href="#24-3-object类" class="headerlink" title="24.3 object类"></a>24.3 object类</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/9d810dd3-343c-4c97-ba30-5c5a642fc593-10865085.jpg"></p>
<ul>
<li>object类特殊的方法和属性<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/7e1825fd-7b83-4cd4-bfdc-b94b7b343f85-10865085.jpg"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class C:</span><br><span class="line">    pass</span><br><span class="line">class B(C):</span><br><span class="line">    pass</span><br><span class="line">class A(B,C):</span><br><span class="line">    pass</span><br><span class="line">a=A()</span><br><span class="line">print(a.__class__)# &lt;class &#x27;__main__.A&#x27;&gt; 输出对象所属类</span><br><span class="line">print(A.__base__)#&lt;class &#x27;object&#x27;&gt;  输出类的基类</span><br><span class="line">print(A.__bases__)# (&lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;__main__.C&#x27;&gt;) 输出所有父类</span><br><span class="line">print(A.__mro__)#(&lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;) 输出基础层次</span><br><span class="line">print(C.__subclasses__())# [&lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;]  输出所有子类的列表</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>new__与__init</strong>(new在前)<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE9af42c4dbf299902e4efa1d07629e896/239"></li>
</ul>
</li>
</ul>
<h3 id="24-4-多态"><a href="#24-4-多态" class="headerlink" title="24,4 多态"></a>24,4 多态</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/ed1350e8-172c-4e16-b87b-69cbd36b3a4e-10865085.jpg"></p>
<ul>
<li>静态语言和动态语言关于多态的区别<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/a058616e-02dc-4b10-804a-0915d6884d0a-10865085.jpg"></li>
</ul>
<h3 id="24-5-面向对象总结"><a href="#24-5-面向对象总结" class="headerlink" title="24.5 面向对象总结"></a>24.5 面向对象总结</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEe61c7e9bc0719e2d683657a17777feab/241"></p>
<h2 id="25-类的浅拷贝与深拷贝"><a href="#25-类的浅拷贝与深拷贝" class="headerlink" title="25 类的浅拷贝与深拷贝"></a>25 类的浅拷贝与深拷贝</h2><ul>
<li><p>基础介绍</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> copy,deepcopy</span><br><span class="line"></span><br><span class="line"><span class="comment"># 浅拷贝</span></span><br><span class="line">copy(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 深拷贝</span></span><br><span class="line">deepcopy(x)</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEec57eb3f5a7e5089f4b1e83935c2c33f/243"></p>
</li>
<li><p>浅拷贝</p>
<p>浅拷贝会创建一个<code>新对象</code>，该新对象存储<code>原始元素</code>的引用</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CPU</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Disk</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Computer</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,Disk,CPU</span>):</span><br><span class="line">            self.Disk=Disk</span><br><span class="line">            self.CPU=CPU</span><br><span class="line">disk=Disk()</span><br><span class="line">cpu=CPU()</span><br><span class="line">a=Computer(disk,cpu)</span><br><span class="line">b=copy.copy(a)</span><br><span class="line"><span class="built_in">print</span>(a,a.Disk,a.CPU)</span><br><span class="line"><span class="built_in">print</span>(b,b.Disk,b.CPU)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;__main__.Computer object at 0x016B0A18&gt; &lt;__main__.Disk object at 0x00ACE580&gt; &lt;__main__.CPU object at 0x00A9AF40&gt;</span></span><br><span class="line"><span class="comment"># &lt;__main__.Computer object at 0x016F4310&gt; &lt;__main__.Disk object at 0x00ACE580&gt; &lt;__main__.CPU object at 0x00A9AF40&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEb5f9f7ef762e3ec0ac6319772ece47c0/247"></p>
</li>
<li><p>浅拷贝的四种实现方式</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.使用切片</span></span><br><span class="line">old_list = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">new_list = old_list[:]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.使用工厂函数(list(),set(),dict())</span></span><br><span class="line">old_list = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">new_list = <span class="built_in">list</span>(old_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.使用数据类型的copy函数</span></span><br><span class="line">old_list = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">new_list = old_list.copy()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.使用copy库的copy函数</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>深拷贝</p>
<ul>
<li>在浅拷贝基础上拷贝子对象</li>
</ul>
</li>
</ul>
<h4 id="浅拷贝与深拷贝区别"><a href="#浅拷贝与深拷贝区别" class="headerlink" title="浅拷贝与深拷贝区别"></a>浅拷贝与深拷贝区别</h4><ul>
<li>浅拷贝和深拷贝只有在可变对象才会生效，不可变对象的赋值、浅拷贝、深拷贝的效果都是一样的</li>
<li>浅拷贝会将对象复制生成一个新对象，但新对象任然存储原始对象的引用，当原始对象时可变对象，然后修改它的值时，新旧对象会同时改变</li>
<li>深拷贝不仅会将对象复制生成一个新对象，且所有原始对象都会复制生成新对象，及时原始对象时可变对象，新对象存储的对象引用也是新的，所以改变旧对象的可改变对象时，不会影响新对象</li>
</ul>
<h2 id="26-模块化编程"><a href="#26-模块化编程" class="headerlink" title="26 模块化编程"></a>26 模块化编程</h2><ul>
<li>模块基础<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEeb43a69e5c0a737011e7615bf3a1080a/250"></li>
<li>创建与导入模块<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE70e123785b600b7da8a116ff18c11292/260"><ul>
<li>使用import时只能接包名和模块名，from…import可以导入包，模块，变量</li>
<li>同一目录下直接导入<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/6c52085f-01eb-45b7-88db-a36a459ccb97-10865085.jpg"><ul>
<li>from post_packaging.method import *</li>
</ul>
</li>
<li>不同目录下导入<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/bb9bfc02-7ab2-4aed-99c2-9e2c0f1b5b5b-10865085.jpg"></li>
</ul>
</li>
<li>python包<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/b3454f8f-b992-4186-9841-4c5b9a4a231c-10865085.jpg"></li>
</ul>
<h3 id="26-1-主程序运行"><a href="#26-1-主程序运行" class="headerlink" title="26.1 主程序运行"></a>26.1 主程序运行</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/7c456333-d523-488f-b21d-0c82d7e2a41f-10865085.jpg"></p>
<h3 id="26-2-python常用模块"><a href="#26-2-python常用模块" class="headerlink" title="26.2 python常用模块"></a>26.2 python常用模块</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/9ce1b8ff-7aba-4b03-a084-f5a4289416e4-10865085.jpg"></p>
<h3 id="26-3-模块总结"><a href="#26-3-模块总结" class="headerlink" title="26.3 模块总结"></a>26.3 模块总结</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/7e6f495b-d999-40d5-84ae-b0d14dff6a3e-10865085.jpg"></p>
<h2 id="27-python文件操作"><a href="#27-python文件操作" class="headerlink" title="27 python文件操作"></a>27 python文件操作</h2><ul>
<li><p>文件的读写<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEa0442d4d915117853e4d80b285ce83d1/265"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/451ae177-1c4d-4719-abe1-32ed85fadf4c-10865085.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">file=open(file,mode=&#x27;r&#x27;,encoding=&#x27;gbk&#x27;)</span><br></pre></td></tr></table></figure></li>
<li><p>常用文件处理方式<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/f1057def-0750-4096-9874-a15e8a27d233-10865085.jpg"></p>
</li>
<li><p>文件常用方法<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/e7e99cd0-a648-4c6e-a9e2-e7f0c5630773-10865085.jpg"></p>
<ul>
<li><span style="color:red">文件对象调用完一定要关闭</span></li>
</ul>
</li>
<li><p>with语句<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/99cc8d63-d3b3-44c1-89f2-3ba9b386a882-10865085.jpg"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">with open(&#x27;a.txt&#x27;,&#x27;r) as file:</span><br><span class="line">  print(file.read())</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="27-1-文件操作设置模式"><a href="#27-1-文件操作设置模式" class="headerlink" title="27.1.文件操作设置模式"></a>27.1.文件操作设置模式</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE057832a197c8448089e2ff4fa11fcac9/452"></p>
<h3 id="27-2-os-模块"><a href="#27-2-os-模块" class="headerlink" title="27.2 os 模块"></a>27.2 os 模块</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/f9a0af3d-d69b-460c-91d1-8fcc7ac28422-10865085.jpg"></p>
<ul>
<li>操作目录的方法<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/e2c3e023-419f-4f4c-b544-14aa2a395226-10865085.jpg"><ul>
<li>os.walk()会把所有子目录和文件遍历出来</li>
</ul>
</li>
<li>os.path操作目录常用函数<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/d2aba294-050a-4c60-9df0-108d5e551685-10865085.jpg"></li>
</ul>
<h2 id="28-python文件打包"><a href="#28-python文件打包" class="headerlink" title="28 python文件打包"></a>28 python文件打包</h2><ul>
<li>Pyinstaller -F py_word.py 打包exe</li>
<li>Pyinstaller -F -w py_word.py 不带控制台的打包</li>
<li>Pyinstaller -F -w -i chengzi.ico py_word.py 打包指定exe图标打包</li>
</ul>
<h2 id="29-正则表达式"><a href="#29-正则表达式" class="headerlink" title="29 正则表达式"></a>29 正则表达式</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE801114b298a2db6e6f8aeb7fe2724ef1/276"></p>
<ul>
<li>正则支持普通字符</li>
<li>元字符：<ul>
<li>\d:匹配一个数字的数字</li>
<li>\w:匹配一个数字、字母、下划线</li>
<li>\W,\D:匹配与上面取反(\D就是取数字以外的内容)</li>
<li>[]:取范围</li>
<li></li>
<li>.:匹配换行符之外的东西</li>
</ul>
</li>
<li>量词：<ul>
<li>控制前面元字符出现的频次</li>
<li>+:前面元字符出现1次或多次</li>
<li>*:前面元字符出现0次或多次，尽可能多的匹配结果</li>
<li>？:前面元字符出现0次或多次</li>
</ul>
</li>
<li>惰性匹配<ul>
<li>1.*2：以1开头2结尾的尽可能长的字符</li>
<li>1.*？2：以1开头以2结尾尽可能短的字符(惰性匹配)</li>
</ul>
</li>
</ul>
<h3 id="29-1-re模块"><a href="#29-1-re模块" class="headerlink" title="29.1 re模块"></a>29.1 re模块</h3><table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>re.findall(“正则表达式”,”字符串”)</td>
<td>拿到列表</td>
</tr>
<tr>
<td>re.search</td>
<td>拿到第一个结果就返回，返回一个match对象，要输出match对象的话要用到group方法</td>
</tr>
<tr>
<td>re.finditer</td>
<td>把拿到的对象全放到迭代器里，也是match对象，结果比较大就用这个</td>
</tr>
</tbody></table>
<ul>
<li>预加载<ul>
<li>obj&#x3D;re.conpile(r”正则表达式”)</li>
<li>先创建一个正则表达对象</li>
<li>obj.findall(“字符串”)</li>
</ul>
</li>
<li>提取惰性匹配的值<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE395be5b232872f922636509821b32a0a/278"><ul>
<li>也可以用groupdict方法，输出为字典</li>
</ul>
</li>
</ul>
<h2 id="30-闭包"><a href="#30-闭包" class="headerlink" title="30 闭包"></a>30 闭包</h2><blockquote>
<p>在计算机科学中，闭包（英语：Closure），又称词法闭包（Lexical Closure）或函数闭包（function closures），是引用了自由变量的函数。这个被引用的自由变量将和这个函数一同存在，即使已经离开了创造它的环境也不例外。所以，有另一种说法认为闭包是由函数和与其相关的引用环境组合而成的实体。闭包在运行时可以有多个实例，不同的引用环境和相同的函数组合可以产生不同的实例。</p>
</blockquote>
<ul>
<li>本层函数对外层函数的局部变量的使用，此时内层函数被称为闭包函数</li>
<li>nonlocal关键字<ul>
<li>用来在函数或者其他作用域中使用改变外层(非全局)变量</li>
</ul>
</li>
<li>global关键字<ul>
<li>使局部变量改变全局变量</li>
</ul>
</li>
<li>闭包作用<ul>
<li>让一个变量常驻于内存</li>
<li>可以在外部使用改变局部变量</li>
<li>可以避免全局变量被修改 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def func(fn):</span><br><span class="line">    def inner():</span><br><span class="line">        print(&#x27;fn进来了&#x27;)</span><br><span class="line">        fn()</span><br><span class="line">        print(&#x27;fn出去了&#x27;)</span><br><span class="line">        return &#x27;f&#x27;</span><br><span class="line">    return inner</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="31-装饰器"><a href="#31-装饰器" class="headerlink" title="31 装饰器"></a>31 装饰器</h2><ul>
<li><p>装饰器本质就是闭包，对外部参数的引用</p>
</li>
<li><p>装饰器的一个关键特性是，它们在被装饰的函数定义之后立即运行</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE4b04ad7a77e3f4839c3aec781b1bf638/282"></p>
</li>
<li><p>作用：再不改变原有函数调用下，给函数增加新功能<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://api2.mubu.com/v3/document_image/843dc11f-ab8a-495d-9f6c-edd8bb66209a-10865085.jpg"></p>
</li>
<li><p>被装饰函数的参数问题<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE1fafef16078d32612e502eb0b1abc167/285"></p>
<ul>
<li>被装饰函数有参数的话，返回函数和目标函数都要加参数</li>
</ul>
</li>
<li><p>装饰器参数问题</p>
<blockquote>
<p>使用带有参数的装饰器，起始是在装饰器外面又包裹了一个函数，使用该函数接受参数，返回是装饰器</p>
<p>装饰器只能接受一个参数，并且还是函数类型</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logging</span>(<span class="params">flag</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">fn</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">num1, num2</span>):</span><br><span class="line">            <span class="keyword">if</span> flag == <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;--正在努力加法计算--&quot;</span>)</span><br><span class="line">            <span class="keyword">elif</span> flag == <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;--正在努力减法计算--&quot;</span>)</span><br><span class="line">            result = fn(num1, num2)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        <span class="keyword">return</span> inner</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@logging(<span class="params"><span class="string">&quot;+&quot;</span></span>)             </span><span class="comment"># @logging(&quot;+&quot;) ==&gt; @decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="meta">@logging(<span class="params"><span class="string">&quot;-&quot;</span></span>)             </span><span class="comment"># @logging(&quot;-&quot;) ==&gt; @decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sub</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line"></span><br><span class="line">result = add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line">result = sub(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line">===运行结果：=======================================================================</span><br><span class="line"></span><br><span class="line">--正在努力加法计算--</span><br><span class="line"><span class="number">3</span></span><br><span class="line">--正在努力减法计算--</span><br><span class="line">-<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>一个函数可被多个装饰器装饰<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE41423cb93092312e319ca6c692d96b55/287"></p>
</li>
<li><p>通用装饰器写法<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEac8b6f5b8fc2f347c7b46322e30ed341/289"></p>
</li>
</ul>
<h2 id="32-迭代器"><a href="#32-迭代器" class="headerlink" title="32 迭代器"></a>32 迭代器</h2><ul>
<li>迭代器基本概念<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE1dd2549d9128032bff9071f76a709740/291"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEbfae8b8c0f2e3623989f0515cfa38dd5/301"><ul>
<li>迭代器的特点<ol>
<li>只能向前不能反复</li>
<li>特别节省内存</li>
<li>惰性机制</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="33-生成器"><a href="#33-生成器" class="headerlink" title="33 生成器"></a>33 生成器</h2><ul>
<li>本质就是迭代器</li>
<li>生成器函数<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCE3289374207963d5bc0b5623b6c3f15b9/294"><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def order():</span><br><span class="line">  lst=[]</span><br><span class="line">  for i in range(100):</span><br><span class="line">      lst.append(f&quot;衣服&#123;i&#125;&quot;)</span><br><span class="line">      if len(lst)==3:</span><br><span class="line">          yield lst</span><br><span class="line">          lst=[]</span><br><span class="line">gen=order()</span><br><span class="line">print(gen.__next__())</span><br><span class="line">print(gen.__next__())</span><br><span class="line"></span><br><span class="line"># [&#x27;衣服0&#x27;, &#x27;衣服1&#x27;, &#x27;衣服2&#x27;]</span><br><span class="line"># [&#x27;衣服3&#x27;, &#x27;衣服4&#x27;, &#x27;衣服5&#x27;]</span><br></pre></td></tr></table></figure></li>
<li>推导式<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://note.youdao.com/yws/public/resource/92933d878935240680c00793fc3e404c/xmlnote/WEBRESOURCEd97b599387567b38f0dbf2de6807fc24/297"></li>
<li>生成器表达式<ul>
<li>优点：用好了特别节省内存</li>
<li>生成器表达式是一次性的</li>
<li>语法：<ul>
<li>(数据 for循环 if)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="34-并发编程"><a href="#34-并发编程" class="headerlink" title="34.并发编程"></a>34.并发编程</h2><h3 id="34-1-概念"><a href="#34-1-概念" class="headerlink" title="34.1.概念"></a>34.1.概念</h3><blockquote>
<p><code>进程</code>就是操作系统中执行的一个程序，操作系统以进程为单位分配存储空间，每个进程都有自己的地址空间、数据栈以及其他用于跟踪进程执行的辅助数据，操作系统管理所有进程的执行，为它们合理的分配资源。进程可以通过fork或spawn的方式来创建新的进程来执行其他的任务，不过新的进程也有自己独立的内存空间，因此必须通过进程间通信机制（IPC，Inter-Process Communication）来实现数据共享，具体的方式包括管道、信号、套接字、共享内存区等。</p>
<p>一个进程还可以拥有多个并发的执行线索，简单的说就是拥有多个可以获得CPU调度的执行单元，这就是所谓的<code>线程</code>。由于线程在同一个进程下，它们可以共享相同的上下文，因此相对于进程而言，线程间的信息共享和通信更加容易。当然在单核CPU系统中，真正的并发是不可能的，因为在某个时刻能够获得CPU的只有唯一的一个线程，多个线程共享了CPU的执行时间。使用多线程实现并发编程为程序带来的好处是不言而喻的，最主要的体现在提升程序的性能和改善用户体验，今天我们使用的软件几乎都用到了多线程技术</p>
<p><strong>并发编程就是为了提升程序运行速度</strong></p>
</blockquote>
<ul>
<li><p><code>多线程</code>：threading,利用CPU和IO可以同时执行的原理，让CPU不会等IO完成再工作</p>
</li>
<li><p><code>多进程</code>：multiprocessing,利用多核CPU的能力，真正的并行执行任务</p>
</li>
<li><p><code>异步IO</code>：asyncio，在单线程利用CPU和IO同时执行的原理，实现函数异步执行</p>
</li>
<li><p>使用Lock对资源进行加锁，防止冲突访问</p>
</li>
<li><p>使用Queue实现不同进程&#x2F;线程之间的数据通信，实现生产者-消费者模式</p>
</li>
<li><p>使用线程池Pool&#x2F;进程池Pool,简化进程&#x2F;线程的任务体检、等待结束、获取结果</p>
</li>
<li><p>使用subprocess启动外部程序的进程，并进行输入输出交互</p>
</li>
</ul>
<h3 id="34-2-全局解释器锁-GIL"><a href="#34-2-全局解释器锁-GIL" class="headerlink" title="34.2.全局解释器锁(GIL)"></a>34.2.全局解释器锁(GIL)</h3><ol>
<li><p>python速度慢的原因</p>
<ol>
<li>python是动态类型语言，边解释边执行</li>
<li>、存在GIL，无法利用多核CPU并发执行</li>
</ol>
</li>
<li><p>GIL是什么？</p>
<ol>
<li><p>是计算机程序设计语言解释器用于同步线程的一种机制，它使得任何时刻仅有一个线程在执行</p>
</li>
<li><p>即便在多核处理器上，使用GIL的解释器也只允许同一时间执行一个线程</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/i/2023/03/05/image-20220804092859868.png" alt="image-20220804092859868"></p>
</li>
</ol>
</li>
<li><p>为什么要有GIL？</p>
<ul>
<li>在python设计初期，为了解决多线程之间数据完整性和状态同步问题，设置出了GIL</li>
<li>为了应对GIL问题，python提供了multiprocessing，使用该模块的多进程机制实现并行计算、利用多核CPU优势</li>
</ul>
</li>
</ol>
<h3 id="34-3-多线程编程"><a href="#34-3-多线程编程" class="headerlink" title="34.3.多线程编程"></a>34.3.多线程编程</h3><p>任何线程执行前必须先获得GIL锁，然后每执行100条字节码，解释器就自动释放GIL锁，让别的线程有机会执行</p>
<p>线程堵塞的几种情况</p>
<ul>
<li>线程调用了sleep方法</li>
<li>线程等待接受用户输入的数据</li>
<li>线程识图获取某个对象的同步锁，如果该锁被其他线程持有，则该线程会进入堵塞状态</li>
<li>线程调用wait方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 直接使用Thread类创建线程</span></span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time, sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">filename</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开始下载%s...&#x27;</span> % filename)</span><br><span class="line">    time_to_download = randint(<span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">    sleep(time_to_download)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s下载完成! 耗费了%d秒&#x27;</span> % (filename, time_to_download))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    start = time()</span><br><span class="line">    <span class="comment"># 创建线程</span></span><br><span class="line">    <span class="comment"># target参数为目标函数名，args参数为函数所需要参数，以元组形式，kwargs参数以字典的方式，为 target 指定的方法传递参数，daemon参数指定所创建的线程是否为后代线程，name参数为线程设置名字。</span></span><br><span class="line">    <span class="comment"># 有一种线程，它是在后台运行的，它的任务是为其他线程提供服务，这种线程被称为“后台线程（Daemon Thread）”，又称为“守护线程”或“精灵线程”。Python 解释器的垃圾回收线程就是典型的后台线程。当所有前台线程终止时，后台线程会自动终止</span></span><br><span class="line">    t1 = Thread(target=download, args=(<span class="string">&#x27;Python从入门到住院.pdf&#x27;</span>,))</span><br><span class="line">    t1.start()</span><br><span class="line">    t2 = Thread(target=download, args=(<span class="string">&#x27;Peking Hot.avi&#x27;</span>,))</span><br><span class="line">    t2.start()</span><br><span class="line">    t3 = Thread(target=download, args=(<span class="string">&#x27;python.pdf&#x27;</span>,))</span><br><span class="line">    <span class="comment"># 线程开始</span></span><br><span class="line">    t3.start()</span><br><span class="line">    <span class="comment"># 等待线程</span></span><br><span class="line">    <span class="comment"># join是在程序指定位置，优先让该方法的调用者使用 CPU 资源</span></span><br><span class="line">    <span class="comment"># timeout为唯一参数，为指定线程最多可霸占CPU资源时间</span></span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    t3.join()</span><br><span class="line">    end = time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;总共耗费了%.3f秒&#x27;</span> % (end - start))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 使用继承Thread类进行创建进程</span></span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time, sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DownloadTask</span>(<span class="title class_ inherited__">Thread</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, filename</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self._filename = filename</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 重写run方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;开始下载%s...&#x27;</span> % self._filename)</span><br><span class="line">        time_to_download = randint(<span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">        sleep(time_to_download)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s下载完成! 耗费了%d秒&#x27;</span> % (self._filename, time_to_download))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    start = time()</span><br><span class="line">    t1 = DownloadTask(<span class="string">&#x27;Python从入门到住院.pdf&#x27;</span>)</span><br><span class="line">    t1.start()</span><br><span class="line">    t2 = DownloadTask(<span class="string">&#x27;Peking Hot.avi&#x27;</span>)</span><br><span class="line">    t2.start()</span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    end = time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;总共耗费了%.2f秒.&#x27;</span> % (end - start))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p>因为多个线程可以共享进程的内存空间，因此要实现多个线程间的通信相对简单，大家能想到的最直接的办法就是设置一个全局变量，多个线程共享这个全局变量即可。但是当多个线程共享同一个变量（我们通常称之为“资源”）的时候，很有可能产生不可控的结果从而导致程序失效甚至崩溃。如果一个资源被多个线程竞争使用，那么我们通常称之为“临界资源”，对“临界资源”的访问需要加上保护，否则资源会处于“混乱”的状态。下面的例子演示了100个线程向同一个银行账户转账（转入1元钱）的场景，在这个例子中，银行账户就是一个临界资源，在没有保护的情况下我们很有可能会得到错误的结果。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self._balance = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">deposit</span>(<span class="params">self, money</span>):</span><br><span class="line">        <span class="comment"># 计算存款后的余额</span></span><br><span class="line">        new_balance = self._balance + money</span><br><span class="line">        <span class="comment"># 模拟受理存款业务需要0.01秒的时间</span></span><br><span class="line">        sleep(<span class="number">0.01</span>)</span><br><span class="line">        <span class="comment"># 修改账户余额</span></span><br><span class="line">        self._balance = new_balance</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">balance</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._balance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddMoneyThread</span>(<span class="title class_ inherited__">Thread</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, account, money</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self._account = account</span><br><span class="line">        self._money = money</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        self._account.deposit(self._money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    account = Account()</span><br><span class="line">    threads = []</span><br><span class="line">    <span class="comment"># 创建100个存款的线程向同一个账户中存钱</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        t = AddMoneyThread(account, <span class="number">1</span>)</span><br><span class="line">        threads.append(t)</span><br><span class="line">        t.start()</span><br><span class="line">    <span class="comment"># 等所有存款的线程都执行完毕</span></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">        t.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;账户余额为: ￥%d元&#x27;</span> % account.balance)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line">    </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">运行结果远远少于100元,这是因为当多个线程同时向账户中存取时，会一起执行计算余额的操作，而多线程得到的账户余额都是初始状态下的0，所以最后得到的结果才会远远小于100</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>针对上面出现的问题，可以使用threading模块中的<code>锁</code>，可以通过<code>锁</code>来保护<code>临界资源</code>，只有获得<code>锁</code>的线程才能访问<code>临界资源</code>，没有得到<code>锁</code>的进程就只能被阻塞起来，知道获得<code>锁</code>的进程释放了<code>锁</code>，其他进程才能获取，进而访问被保护的<code>临界资源</code>。</p>
<p>其实，除非必须将多线程使用的资源设置为公共资源，<a target="_blank" rel="noopener" href="http://c.biancheng.net/python/">Python</a> threading 模块还提供了一种可彻底避免数据不同步问题的方法，即 local() 函数。</p>
<p>使用 local() 函数创建的变量，可以被各个线程调用，但和公共资源不同，各个线程在使用 local() 函数创建的变量时，都会在该线程自己的内存空间中拷贝一份。这意味着，local() 函数创建的变量看似全局变量（可以被各个线程调用），但各线程调用的都是该变量的副本（各调用各的，之间并无关系）。</p>
<p>可以这么理解，使用 threading 模块中的 local() 函数，可以为各个线程创建完全属于它们自己的变量（又称线程局部变量）。正是由于各个线程操作的是属于自己的变量，该资源属于各个线程的私有资源，因此可以从根本上杜绝发生数据同步问题。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread, Lock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self._balance = <span class="number">0</span></span><br><span class="line">        self._lock = Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">deposit</span>(<span class="params">self, money</span>):</span><br><span class="line">        <span class="comment"># 先获取锁才能执行后续的代码</span></span><br><span class="line">        self._lock.acquire()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            new_balance = self._balance + money</span><br><span class="line">            sleep(<span class="number">0.01</span>)</span><br><span class="line">            self._balance = new_balance</span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            <span class="comment"># 在finally中执行释放锁的操作保证正常异常锁都能释放</span></span><br><span class="line">            self._lock.release()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">balance</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._balance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddMoneyThread</span>(<span class="title class_ inherited__">Thread</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, account, money</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self._account = account</span><br><span class="line">        self._money = money</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        self._account.deposit(self._money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    account = Account()</span><br><span class="line">    threads = []</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        t = AddMoneyThread(account, <span class="number">1</span>)</span><br><span class="line">        threads.append(t)</span><br><span class="line">        t.start()</span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">        t.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;账户余额为: ￥%d元&#x27;</span> % account.balance)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建全局ThreadLocal对象:</span></span><br><span class="line">local = threading.local()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process</span>():</span><br><span class="line">    <span class="comment"># 3.获取当前线程关联的resource:</span></span><br><span class="line">    res = local.resource</span><br><span class="line">    <span class="built_in">print</span> (res + <span class="string">&quot;http://c.biancheng.net/python/&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_thread</span>(<span class="params">res</span>):</span><br><span class="line">    <span class="comment"># 1.为当前线程绑定ThreadLocal的resource:</span></span><br><span class="line">    local.resource = res</span><br><span class="line">    <span class="comment"># 2.线程的调用函数不需要传递res了，可以通过全局变量local访问</span></span><br><span class="line">    process()</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=process_thread, args=(<span class="string">&#x27;t1线程&#x27;</span>,))</span><br><span class="line">t2 = threading.Thread(target=process_thread, args=(<span class="string">&#x27;t2线程&#x27;</span>,))</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br></pre></td></tr></table></figure>

<p>​								<strong>对于不同线程之间的数据通信，可以用queue.Queue</strong></p>
<table>
<thead>
<tr>
<th align="center">方法</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Queue()</td>
<td align="center">创建Queue类</td>
</tr>
<tr>
<td align="center">put()</td>
<td align="center">添加元素(会堵塞)</td>
</tr>
<tr>
<td align="center">get()</td>
<td align="center">获取元素(会堵塞)</td>
</tr>
<tr>
<td align="center">qsize()</td>
<td align="center">查看元素的多少</td>
</tr>
<tr>
<td align="center">empty()</td>
<td align="center">判断是否为空</td>
</tr>
<tr>
<td align="center">full()</td>
<td align="center">判断是否满了</td>
</tr>
<tr>
<td align="center">此类只能在单进程内使用</td>
<td align="center"></td>
</tr>
</tbody></table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/i/2023/03/05/image-20220804090810974.png" alt="image-20220804090810974"></p>
<p>新建线程需要分配资源、终止线程需要回收资源，如果可以重用线程，则可以减去新建与终止的开销。这就是<code>线程池</code>的作用，可以提升性能，避免系统因为创建线程过多，而导致系统负荷太大相应变慢等问题。适合处理突发性大量请求或大量线程完成任务，但实际任务处理时间较短</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/i/2023/03/05/image-20220804090955323.png" alt="image-20220804090955323"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor,as_completed</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法1</span></span><br><span class="line"><span class="comment"># shutdown()可关闭线程池</span></span><br><span class="line"><span class="keyword">with</span> ThreadPoolExecutor() <span class="keyword">as</span> pool:</span><br><span class="line">    <span class="comment"># craw为执行函数，urls为全部参数列表</span></span><br><span class="line">    <span class="comment"># map函数的结果的入参是顺序对应的</span></span><br><span class="line">    results = pool.<span class="built_in">map</span>(craw,urls)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">        <span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line"><span class="keyword">with</span> ThreadPoolExecutor() <span class="keyword">as</span> pool:</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># sumbit方法一次只能提交一个参数列表</span></span><br><span class="line">    futures = [pool.submit(craw.url) <span class="keyword">for</span> url <span class="keyword">in</span> urls]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 这种遍历方法会等线程全部结束在按循序进行遍历输出</span></span><br><span class="line">    <span class="keyword">for</span> future <span class="keyword">in</span> futures:</span><br><span class="line">        <span class="built_in">print</span>(future.result())</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 这种遍历方法不会等全部线程结束，而是线程池里一有结果就输出</span></span><br><span class="line">    <span class="keyword">for</span> future <span class="keyword">in</span> as_completed(futures):</span><br><span class="line">        <span class="built_in">print</span>(future.result())</span><br><span class="line">    </span><br></pre></td></tr></table></figure>



<h3 id="34-4-多进程编程"><a href="#34-4-多进程编程" class="headerlink" title="34.4.多进程编程"></a>34.4.多进程编程</h3><p>当遇到CPU密集型运算时，使用多进程能更好的加快程序运行速度，multiprocessing模块就是python为了解决GIL缺席引入的一个模块，原理是用多进程在多CPU上并行执行</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> getpid</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time, sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_task</span>(<span class="params">filename</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;启动下载进程，进程号[%d].&#x27;</span> % getpid())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;开始下载%s...&#x27;</span> % filename)</span><br><span class="line">    time_to_download = randint(<span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line">    sleep(time_to_download)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s下载完成! 耗费了%d秒&#x27;</span> % (filename, time_to_download))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    start = time()</span><br><span class="line">    <span class="comment"># 跟线程一样</span></span><br><span class="line">    p1 = Process(target=download_task, args=(<span class="string">&#x27;Python从入门到住院.pdf&#x27;</span>, ))</span><br><span class="line">    p1.start()</span><br><span class="line">    p2 = Process(target=download_task, args=(<span class="string">&#x27;Peking Hot.avi&#x27;</span>, ))</span><br><span class="line">    p2.start()</span><br><span class="line">    p1.join()</span><br><span class="line">    p2.join()</span><br><span class="line">    end = time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;总共耗费了%.2f秒.&#x27;</span> % (end - start))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h3 id="34-5-多进程与多线程总结"><a href="#34-5-多进程与多线程总结" class="headerlink" title="34.5.多进程与多线程总结"></a>34.5.多进程与多线程总结</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/i/2023/03/05/image-20220804092941403.png" alt="image-20220804092941403"></p>
<h3 id="34-6-协程编程"><a href="#34-6-协程编程" class="headerlink" title="34.6.协程编程"></a>34.6.协程编程</h3><p>现代操作系统对I&#x2F;O操作的改进中最为重要的就是支持异步I&#x2F;O。如果充分利用操作系统提供的异步I&#x2F;O支持，就可以用单进程单线程模型来执行多任务，这种全新的模型称为事件驱动模型。Nginx就是支持异步I&#x2F;O的Web服务器，它在单核CPU上采用单进程模型就可以高效地支持多任务。在多核CPU上，可以运行多个进程（数量与CPU核心数相同），充分利用多核CPU。用Node.js开发的服务器端程序也使用了这种工作模式，这也是当下并发编程的一种流行方案。</p>
<p>在Python语言中，单线程+异步I&#x2F;O的编程模型称为协程，有了协程的支持，就可以基于事件驱动编写高效的多任务程序。协程最大的优势就是极高的执行效率，因为子程序切换不是线程切换，而是由程序自身控制，因此，<code>没有线程切换的开销</code>。协程的第二个优势就是<code>不需要多线程的锁机制</code>，因为只有一个线程，也不存在同时写变量冲突，在协程中控制共享资源不用加锁，只需要判断状态就好了，所以执行效率比多线程高很多。如果想要充分利用CPU的多核特性，最简单的方法是多进程+协程，既充分利用多核，又充分发挥协程的高效率，可获得极高的性能。</p>
<ul>
<li>event_loop事件循环:程序开启一个无限循环，程序员会把一些函数注册到事件循环上。当满足事件发生的时候，调用相应的协程函数</li>
<li>coroutine协程:协程对象，指一个使用async关键字定义的函数，它的调用不会立即执行函数，而是返回一个协程对象。协程对象需要注册到事件循环，由事件循环调用</li>
<li>task任务:一个协程对象就是一个原生可以挂起的函数，任务则是对协程进一步封装，其中包含任务的各种状态</li>
<li>future:代表将来执行或没有执行的任务的结果。和task一样</li>
<li>async&#x2F;await:用于定义协程的关键字，async定义一个协程，await用于挂起阻塞的异步调用接口</li>
<li>async with:异步上下文管理器，指的是在<code>enter</code>和<code>exit</code>方法处能暂定执行的上下文管理器</li>
<li>async for ：异步迭代器</li>
</ul>
<h4 id="创建协程"><a href="#创建协程" class="headerlink" title="创建协程"></a>创建协程</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line">now = <span class="keyword">lambda</span> : time.time()</span><br><span class="line"></span><br><span class="line"><span class="comment"># async关键字定义协程</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting: &#x27;</span>, x)</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line"></span><br><span class="line">coroutine = do_some_work(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get_event_loop()注册一个事件循环</span></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将协程注册到事件循环</span></span><br><span class="line">loop.run_until_complete(coroutine)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#x27;</span>, now() - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="创建task"><a href="#创建task" class="headerlink" title="创建task"></a>创建task</h4><p>协程对象不能直接运行，在注册事件循环的时候，其实是run_until_complete方法将协程包装成为了一个任务（task）对象。所谓task对象是Future类的子类。保存了协程运行后的状态，用于未来获取协程的结果。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">now = <span class="keyword">lambda</span> : time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting: &#x27;</span>, x)</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line"></span><br><span class="line">coroutine = do_some_work(<span class="number">2</span>)</span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"><span class="comment"># task = asyncio.ensure_future(coroutine)</span></span><br><span class="line"><span class="comment"># 创建一个task对象</span></span><br><span class="line">task = loop.create_task(coroutine)</span><br><span class="line"><span class="built_in">print</span>(task)</span><br><span class="line">loop.run_until_complete(task)</span><br><span class="line"><span class="built_in">print</span>(task)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#x27;</span>, now() - start)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;Task pending name=&#x27;Task-1&#x27; coro=&lt;do_some_work() running at /img/pycharm项目/python-100-days/python-1.py:6&gt;&gt;</span></span><br><span class="line"><span class="string">Waiting:  2</span></span><br><span class="line"><span class="string">&lt;Task finished name=&#x27;Task-1&#x27; coro=&lt;do_some_work() done, defined at /img/pycharm项目/python-100-days/python-1.py:6&gt; result=None&gt;</span></span><br><span class="line"><span class="string">TIME:  0.001995086669921875</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">asyncio.ensure_future(coroutine) 和 loop.create_task(coroutine)都可以创建一个task，run_until_complete的参数是一个futrue对象。当传入一个协程，其内部会自动封装成task，task是Future的子类。isinstance(task, asyncio.Future)将会输出True。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="绑定回调"><a href="#绑定回调" class="headerlink" title="绑定回调"></a>绑定回调</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line">now = <span class="keyword">lambda</span> : time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting: &#x27;</span>, x)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Done after &#123;&#125;s&#x27;</span>.<span class="built_in">format</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">future</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Callback: &#x27;</span>, future.result())</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line"></span><br><span class="line">coroutine = do_some_work(<span class="number">2</span>)</span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">task = asyncio.ensure_future(coroutine)</span><br><span class="line"><span class="comment"># 绑定回调</span></span><br><span class="line">task.add_done_callback(callback)</span><br><span class="line">loop.run_until_complete(task)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#x27;</span>, now() - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">t, future</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Callback:&#x27;</span>, t, future.result())</span><br><span class="line"></span><br><span class="line">task.add_done_callback(functools.partial(callback, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<h4 id="阻塞与await"><a href="#阻塞与await" class="headerlink" title="阻塞与await"></a>阻塞与await</h4><p>如果在异步协程中出现了同步模块相关的代码，那么则无法实现异步</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">now = <span class="keyword">lambda</span>: time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting: &#x27;</span>, x)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 协程遇到await，如果后面跟的是阻塞事件，事件循环将会挂起协程，执行别的协程</span></span><br><span class="line">    <span class="comment"># 如果是别的协程，则会转执行别的协程</span></span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(x)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Done after &#123;&#125;s&#x27;</span>.<span class="built_in">format</span>(x)</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line"></span><br><span class="line">coroutine = do_some_work(<span class="number">2</span>)</span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">task = asyncio.ensure_future(coroutine)</span><br><span class="line">loop.run_until_complete(task)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Task ret: &#x27;</span>, task.result())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#x27;</span>, now() - start)  </span><br></pre></td></tr></table></figure>

<h4 id="并发与并行"><a href="#并发与并行" class="headerlink" title="并发与并行"></a>并发与并行</h4><p>并发通常指有多个任务需要同时进行，并行则是同一时刻有多个任务执行。</p>
<p>asyncio实现并发，就需要多个协程来完成任务，每当有任务阻塞的时候就await，然后其他协程继续工作。创建多个协程的列表，然后将这些协程注册到事件循环中。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">now = <span class="keyword">lambda</span>: time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting: &#x27;</span>, x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(x)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Done after &#123;&#125;s&#x27;</span>.<span class="built_in">format</span>(x)</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line"></span><br><span class="line">coroutine1 = do_some_work(<span class="number">1</span>)</span><br><span class="line">coroutine2 = do_some_work(<span class="number">2</span>)</span><br><span class="line">coroutine3 = do_some_work(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">tasks = [</span><br><span class="line">    asyncio.ensure_future(coroutine1),</span><br><span class="line">    asyncio.ensure_future(coroutine2),</span><br><span class="line">    asyncio.ensure_future(coroutine3)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># asyncio.wait(tasks) 也可以使用 asyncio.gather(*tasks) ,前者接受一个task列表，后者接收一堆task。</span></span><br><span class="line"><span class="comment"># wait会返回完成的任务列表(done)和等待(Future)完成的任务列表(pending)</span></span><br><span class="line"><span class="comment"># gather返回的是协程结果集</span></span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> task <span class="keyword">in</span> tasks:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Task ret: &#x27;</span>, task.result())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#x27;</span>, now() - start)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">结果为：</span></span><br><span class="line"><span class="string">Waiting:  1</span></span><br><span class="line"><span class="string">Waiting:  2</span></span><br><span class="line"><span class="string">Waiting:  4</span></span><br><span class="line"><span class="string">Task ret:  Done after 1s</span></span><br><span class="line"><span class="string">Task ret:  Done after 2s</span></span><br><span class="line"><span class="string">Task ret:  Done after 4s</span></span><br><span class="line"><span class="string">TIME:  4.005150556564331</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="协程嵌套"><a href="#协程嵌套" class="headerlink" title="协程嵌套"></a>协程嵌套</h4><p>嵌套的协程，即一个协程中await了另外一个协程，如此连接起来</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">now = <span class="keyword">lambda</span>: time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting: &#x27;</span>, x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(x)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Done after &#123;&#125;s&#x27;</span>.<span class="built_in">format</span>(x)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    coroutine1 = do_some_work(<span class="number">1</span>)</span><br><span class="line">    coroutine2 = do_some_work(<span class="number">2</span>)</span><br><span class="line">    coroutine3 = do_some_work(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    tasks = [</span><br><span class="line">        asyncio.ensure_future(coroutine1),</span><br><span class="line">        asyncio.ensure_future(coroutine2),</span><br><span class="line">        asyncio.ensure_future(coroutine3)</span><br><span class="line">    ]</span><br><span class="line">	<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">	# 可以使用asyncio.gather()，但是返回的是结果集</span></span><br><span class="line"><span class="string">	results = await asyncio.gather(*tasks)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    for result in results:</span></span><br><span class="line"><span class="string">        print(&#x27;Task ret: &#x27;, result)</span></span><br><span class="line"><span class="string">	&#x27;&#x27;&#x27;</span></span><br><span class="line">    dones, pendings = <span class="keyword">await</span> asyncio.wait(tasks)</span><br><span class="line">	<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">	# 可以使用as_completed方法</span></span><br><span class="line"><span class="string">	for task in asyncio.as_completed(tasks):</span></span><br><span class="line"><span class="string">        result = await task</span></span><br><span class="line"><span class="string">        print(&#x27;Task ret: &#123;&#125;&#x27;.format(result))</span></span><br><span class="line"><span class="string">	&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> task <span class="keyword">in</span> dones:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Task ret: &#x27;</span>, task.result())</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># main协程若有返回值，该函数会返回main协程的返回值</span></span><br><span class="line">loop.run_until_complete(main())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#x27;</span>, now() - start)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="协程停止"><a href="#协程停止" class="headerlink" title="协程停止"></a>协程停止</h4><p>一般来说，future有以下几种状态：</p>
<ul>
<li>Pending：刚创建future对象时</li>
<li>Running：事件循环调用时</li>
<li>Done：调用完毕</li>
<li>Cancelled：取消调用</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">now = <span class="keyword">lambda</span>: time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting: &#x27;</span>, x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(x)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Done after &#123;&#125;s&#x27;</span>.<span class="built_in">format</span>(x)</span><br><span class="line"></span><br><span class="line">coroutine1 = do_some_work(<span class="number">1</span>)</span><br><span class="line">coroutine2 = do_some_work(<span class="number">2</span>)</span><br><span class="line">coroutine3 = do_some_work(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">tasks = [</span><br><span class="line">    asyncio.ensure_future(coroutine1),</span><br><span class="line">    asyncio.ensure_future(coroutine2),</span><br><span class="line">    asyncio.ensure_future(coroutine3)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line"><span class="keyword">except</span> KeyboardInterrupt <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(asyncio.Task.all_tasks())</span><br><span class="line">    <span class="comment"># 读取task列表</span></span><br><span class="line">    <span class="keyword">for</span> task <span class="keyword">in</span> asyncio.Task.all_tasks():</span><br><span class="line">        <span class="comment"># 取消task调用</span></span><br><span class="line">        <span class="built_in">print</span>(task.cancel())</span><br><span class="line">    <span class="comment"># 暂停事件循环，暂停循环后需要再次开启循环最后关闭，不然会抛出异常</span></span><br><span class="line">    loop.stop()</span><br><span class="line">    <span class="comment"># 再次开启循环</span></span><br><span class="line">    loop.run_forever()</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># 关闭循环</span></span><br><span class="line">    loop.close()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#x27;</span>, now() - start)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">当发生协程嵌套时，只需要终止最外层的协程就行了</span></span><br><span class="line"><span class="string">loop = asyncio.get_event_loop()</span></span><br><span class="line"><span class="string">task = loop.ensure_future(main())</span></span><br><span class="line"><span class="string">try:</span></span><br><span class="line"><span class="string">    loop.run_until_complete(asyncio.wait(task))</span></span><br><span class="line"><span class="string">except KeyboardInterrupt as e:</span></span><br><span class="line"><span class="string">    # 读取task列表</span></span><br><span class="line"><span class="string">    asyncio.gather(*asyncio.Task.all_tasks().cancel())</span></span><br><span class="line"><span class="string">    # 暂停事件循环，暂停循环后需要再次开启循环最后关闭，不然会抛出异常</span></span><br><span class="line"><span class="string">    loop.stop()</span></span><br><span class="line"><span class="string">    # 再次开启循环</span></span><br><span class="line"><span class="string">    loop.run_forever()</span></span><br><span class="line"><span class="string">finally:</span></span><br><span class="line"><span class="string">    # 关闭循环</span></span><br><span class="line"><span class="string">    loop.close()</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="不同线程的事件循环"><a href="#不同线程的事件循环" class="headerlink" title="不同线程的事件循环"></a>不同线程的事件循环</h4><p>很多时候，我们的事件循环用于注册协程，而有的协程需要动态的添加到事件循环中。一个简单的方式就是使用多线程。当前线程创建一个事件循环，然后在新建一个线程，在新线程中启动事件循环。当前线程不会被block。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start_loop</span>(<span class="params">loop</span>):</span><br><span class="line">    <span class="comment"># 将 loop 设置为当前 OS 线程的当前事件循环。</span></span><br><span class="line">    asyncio.set_event_loop(loop)</span><br><span class="line">    <span class="comment"># 运行事件循环直到 stop() 被调用。</span></span><br><span class="line">    loop.run_forever()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">more_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;More work &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x))</span><br><span class="line">    time.sleep(x)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Finished more work &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">now_time = <span class="keyword">lambda</span>: time.time()</span><br><span class="line">start = now_time()</span><br><span class="line"><span class="comment"># 创建一个新循环</span></span><br><span class="line">new_loop = asyncio.new_event_loop()</span><br><span class="line">old_loop = asyncio.get_event_loop()</span><br><span class="line">t = Thread(target=start_loop, args=(new_loop,))</span><br><span class="line">t.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(time.time() - start))</span><br><span class="line"></span><br><span class="line">new_loop.call_soon_threadsafe(more_work, <span class="number">6</span>)</span><br><span class="line">new_loop.call_soon_threadsafe(more_work, <span class="number">3</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="新线程协程"><a href="#新线程协程" class="headerlink" title="新线程协程"></a>新线程协程</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">start_loop</span>(<span class="params">loop</span>):</span><br><span class="line">    asyncio.set_event_loop(loop)</span><br><span class="line">    loop.run_forever()</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">do_some_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Waiting &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x))</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(x)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Done after &#123;&#125;s&#x27;</span>.<span class="built_in">format</span>(x))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">more_work</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;More work &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x))</span><br><span class="line">    time.sleep(x)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Finished more work &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x))</span><br><span class="line"></span><br><span class="line">start = now()</span><br><span class="line">new_loop = asyncio.new_event_loop()</span><br><span class="line">t = Thread(target=start_loop, args=(new_loop,))</span><br><span class="line">t.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIME: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(time.time() - start))</span><br><span class="line"></span><br><span class="line">asyncio.run_coroutine_threadsafe(do_some_work(<span class="number">6</span>), new_loop)</span><br><span class="line">asyncio.run_coroutine_threadsafe(do_some_work(<span class="number">4</span>), new_loop)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">主线程中创建一个new_loop，然后在另外的子线程中开启一个无限事件循环。主线程通过run_coroutine_threadsafe新注册协程对象。这样就能在子线程中进行事件循环的并发操作，同时主线程又不会被block。一共执行的时间大概在6s左右。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="主线程与子线程"><a href="#主线程与子线程" class="headerlink" title="主线程与子线程"></a>主线程与子线程</h4><p>因为协程更适合单线程，当有了不同类型任务时，我们可以开多线程协程来处理不同任务，如主线程用来监听队列，子线程用来处理队列。</p>
<p>退出可以把子线程设置为守护线程，当主线程退出后自动退出</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">new_loop = asyncio.new_event_loop()</span><br><span class="line">t = Thread(target=start_loop, args=(new_loop,))</span><br><span class="line">t.setDaemon(<span class="literal">True</span>)    <span class="comment"># 设置子线程为守护线程</span></span><br><span class="line">t.start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># print(&#x27;start rpop&#x27;)</span></span><br><span class="line">        task = rcon.rpop(<span class="string">&quot;queue&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> task:</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        asyncio.run_coroutine_threadsafe(do_some_work(<span class="built_in">int</span>(task)), new_loop)</span><br><span class="line"><span class="keyword">except</span> KeyboardInterrupt <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br><span class="line">    new_loop.stop()</span><br></pre></td></tr></table></figure>

<h4 id="aiohttp模块"><a href="#aiohttp模块" class="headerlink" title="aiohttp模块"></a>aiohttp模块</h4><h5 id="session请求"><a href="#session请求" class="headerlink" title="session请求"></a>session请求</h5><p>在aiohttp模块中，发起一个session请求需要创建一个ClientSession对象</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio,aiohttp</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">fetch_async</span>(<span class="params">url</span>):</span><br><span class="line">	<span class="built_in">print</span>(url)</span><br><span class="line">    <span class="comment"># 如果要自定义cookie，则要在创建对象的时候引入</span></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession(cookie=自定义cookie字典) <span class="keyword">as</span> session:</span><br><span class="line">        <span class="comment"># 跟requests一样的请求方式</span></span><br><span class="line">        <span class="comment"># requests是基于同步</span></span><br><span class="line">        <span class="comment"># aiohttp是基于异步</span></span><br><span class="line">        <span class="comment"># 如果要携带参数的话，直接字典传入params参数</span></span><br><span class="line">        <span class="comment"># 代理使用proxy参数</span></span><br><span class="line">        asycn <span class="keyword">with</span> session.get(url) <span class="keyword">as</span> resp:</span><br><span class="line">            <span class="built_in">print</span>(resp.status)</span><br><span class="line">            <span class="comment"># text()返回字符串的响应数据</span></span><br><span class="line">            <span class="comment"># read()返回二进制的响应数据</span></span><br><span class="line">            <span class="comment"># json()返回json类型响应数据</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="keyword">await</span> resp.text())</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">除了上面的请求方式外</span></span><br><span class="line"><span class="string">session.put(&#x27;http://httpbin.org/put&#x27;, data=b&#x27;data&#x27;)</span></span><br><span class="line"><span class="string">session.delete(&#x27;http://httpbin.org/delete&#x27;)</span></span><br><span class="line"><span class="string">session.head(&#x27;http://httpbin.org/get&#x27;)</span></span><br><span class="line"><span class="string">session.options(&#x27;http://httpbin.org/get&#x27;)</span></span><br><span class="line"><span class="string">session.patch(&#x27;http://httpbin.org/patch&#x27;, data=b&#x27;data&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>cookie总结：</p>
<p>当我们使用rp.cookie时，只会获取到当前url下设置的cookie,不会维护整站的cookie</p>
<p>而session.cookie_jar.filter_cookies(“<a target="_blank" rel="noopener" href="https://segmentfault.com")会一直保留这个网站的所有设置cookies,含有我们在会话时设置的cookie,并且会根据响应修改更新cookie.这个才是我们需要的/">https://segmentfault.com&quot;)会一直保留这个网站的所有设置cookies，含有我们在会话时设置的cookie，并且会根据响应修改更新cookie。这个才是我们需要的</a></p>
<p>而我们设置cookie，也是需要在aiohttp.ClientSession(cookies&#x3D;cookies)中设置</p>
</blockquote>
<h5 id="使用字节流形式获取数据"><a href="#使用字节流形式获取数据" class="headerlink" title="使用字节流形式获取数据"></a>使用字节流形式获取数据</h5><p>text(),read(),json()都是直接把整个响应体读入内存，如果要获取大量数据，请考虑使用字节流读取数据，我们获取的session.get()是Response对象，继承与StreamResponse</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">func1</span>(<span class="params">url,params,filename</span>):</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(url,params=params) <span class="keyword">as</span> r:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(filename,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">                <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                    chunk = <span class="keyword">await</span> r.content.read(<span class="number">10</span>)</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> chunk:</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                    fp.write(chunk)</span><br></pre></td></tr></table></figure>

<h5 id="控制同时连接的数量-链接池"><a href="#控制同时连接的数量-链接池" class="headerlink" title="控制同时连接的数量(链接池)"></a>控制同时连接的数量(链接池)</h5><p>TcpConnector维持链接池，限制并行链接的总量，当池满了，有请求退出再加入新请求</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">func1</span>():</span><br><span class="line">    cookies = &#123;<span class="string">&#x27;my_cookie&#x27;</span>: <span class="string">&quot;my_value&quot;</span>&#125;</span><br><span class="line">    conn = aiohttp.TCPConnector(limit=<span class="number">2</span>)　　<span class="comment">#默认100，0表示无限</span></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession(cookies=cookies,connector=conn) <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">7</span>,<span class="number">35</span>):</span><br><span class="line">            url = <span class="string">&quot;https://www.ckook.com/list-%s-1.html&quot;</span>%i</span><br><span class="line">            <span class="keyword">async</span> <span class="keyword">with</span> session.get(url) <span class="keyword">as</span> rp:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;---------------------------------&#x27;</span>)</span><br><span class="line">                <span class="built_in">print</span>(rp.status)</span><br></pre></td></tr></table></figure>

<h3 id="34-并发编程总结"><a href="#34-并发编程总结" class="headerlink" title="34.并发编程总结"></a>34.并发编程总结</h3><ol>
<li><p>什么是CUP密集型计算、IO密集型计算？</p>
<p><code>CPU密集型</code>(CPU-bound)：也叫作计算密集型，是指I&#x2F;O在很短的时间就可以完成，CPU需要大量的计算和处理，特点是CPU占用率相当高</p>
<p>如：压缩解压缩、加密解密、正则表达式搜索</p>
<p><code>IO密集型(I/O-bound)</code>：指系统运作大部分的状况是CPU在等I&#x2F;O的读&#x2F;写操作，CPU占用率较低</p>
<p>例如：文件处理程序、网络爬虫程序、读写数据库程序</p>
</li>
<li><p>对比</p>
<blockquote>
<p><code>多进程</code>：Process(multiprocessing)</p>
<p>优点：可以利用多核CPU并行运算</p>
<p>缺点：占用资源最多，可启动数目比线程少</p>
<p>适用于：CPU密集型计算</p>
</blockquote>
<blockquote>
<p><code>多线程</code>:Thread(threading)</p>
<p>优点：相比于进程，更轻量级、占用资源少</p>
<p>缺点：</p>
<ul>
<li>相比于进程：多线程只能并发执行，不能利用多CPU(GIL)</li>
<li>相比于协程：启动数目有限制，占用内存资源，有线程切换开销</li>
</ul>
<p>适用于：IO密集型计算、同时运行的任务数目要求不多</p>
</blockquote>
<blockquote>
<p><code>多协程</code>:Coroutine(asyncio)</p>
<p>优点：内存开销最少，启动协程数量最多</p>
<p>缺点：支持的库有限制，代码实现复杂</p>
<p>适用于：IO密集型计算，适合于需要超多任务运行，但有现成库支持的场景</p>
</blockquote>
<blockquote>
<p>一个进程中可以启动N个线程，一个线程中可以启动N个协程</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/i/2023/03/05/image-20220804203939914.png" alt="image-20220804203939914"></p>
</li>
</ol>
<h2 id="35-断言"><a href="#35-断言" class="headerlink" title="35.断言"></a>35.断言</h2><p>对一个函数所谓断言，就是证明，使用 assert 对输入函数输入参数和函数返回结果分别做前校验和后校验</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span>  <span class="title function_">zero</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">type</span>(a) == <span class="built_in">int</span>,<span class="string">&quot;a的类型错误&quot;</span> <span class="comment"># 如果不等于int类型，函数无法向下执行，且会报错</span></span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">zero(<span class="string">&#x27;1&#x27;</span>) <span class="comment"># AssertionError: a的类型错误</span></span><br></pre></td></tr></table></figure>

<h2 id="36-反射"><a href="#36-反射" class="headerlink" title="36.反射"></a>36.反射</h2><p><strong>python的反射，它的核心本质其实就是利用字符串的形式去对象（模块）中操作（查找&#x2F;获取&#x2F;删除&#x2F;添加）成员，一种基于字符串的事件驱动！</strong></p>
<p>常用方法：</p>
<ol>
<li><p>hasattr：判断对象是否有这个方法或变量</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">t= A(<span class="string">&#x27;456&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(t,<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">hasattr</span>(t,<span class="string">&#x27;name&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>getattr(obj,str,default&#x3D;None)：获取对象中的方法会变量的内存地址，第三个参数设置没找到时默认输出</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">t= A(<span class="string">&#x27;456&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getattr</span>(t,<span class="string">&#x27;name&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getattr</span>(t,<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">getattr</span>(t,<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;not found&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">456</span></span><br><span class="line"><span class="string">&lt;bound method A.a of &lt;__main__.A object at 0x000001BBEFE06700&gt;&gt;</span></span><br><span class="line"><span class="string">not found</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>


</li>
<li><p>setattr：为对象添加方法或变量，第三个参数为设置的值</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">a</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">t= A(<span class="string">&#x27;456&#x27;</span>)</span><br><span class="line"><span class="built_in">setattr</span>(t,<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;789&#x27;</span>)</span><br><span class="line"><span class="built_in">setattr</span>(t,<span class="string">&#x27;name1&#x27;</span>,<span class="string">&#x27;456&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(t.name,t.name1)</span><br></pre></td></tr></table></figure>
</li>
<li><p>delattr：删除对象中的变量，不能删除方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">talk</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s正在交谈&quot;</span>%self.name)</span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">&quot;laowang&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">delattr</span>(p,<span class="string">&quot;name&quot;</span>)       <span class="comment"># 删除name变量</span></span><br><span class="line"><span class="built_in">print</span>(p.name)           <span class="comment"># 此时将报错</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="37-泛型"><a href="#37-泛型" class="headerlink" title="37.泛型"></a>37.泛型</h2><p><strong>参考资料</strong>：[<a target="_blank" rel="noopener" href="https://www.cnblogs.com/poloyy/p/15154196.html">Python - typing 模块 —— TypeVar 泛型 - 小菠萝测试笔记 - 博客园 (cnblogs.com)</a>](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/poloyy/p/15154196.html">Python - typing 模块 —— TypeVar 泛型 - 小菠萝测试笔记 - 博客园 (cnblogs.com)</a>)</p>
<blockquote>
<p>python是一种<code>动态类型</code>语言，运行时不需要指定变量类型</p>
<p>同时也存在无法及时给出语法提示或类型出错等问题</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">split_str</span>(<span class="params">s</span>):</span><br><span class="line">    strs = s.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">在传递s参数时，由于无法知道s类型</span></span><br><span class="line"><span class="string">所以无法在编程时给出语法提示</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>为了解决上述问题，Python3.5、3.6新增两个特性PEP 484 和PEP 526</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>：函数参数提示</li>
<li><a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0526/">PEP 526</a>：变量提示</li>
</ul>
<h3 id="变量类型设置"><a href="#变量类型设置" class="headerlink" title="变量类型设置"></a>变量类型设置</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, ClassVar, <span class="type">Dict</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># int 变量，默认为0</span></span><br><span class="line">num : <span class="built_in">int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># bool 变量，默认值为True</span></span><br><span class="line">bool_var : <span class="built_in">bool</span> = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典变量，默认为空</span></span><br><span class="line">dict_var : <span class="type">Dict</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表变量，且列表元素为 int</span></span><br><span class="line">primes : <span class="type">List</span>[<span class="built_in">int</span>] = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Starship</span>:</span><br><span class="line">    <span class="comment"># 类变量，字典类型，键 - 字符串，值 - 整型</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    ClassVar是typing模块的一个特殊类</span></span><br><span class="line"><span class="string">    它想静态类型检查器指示不应该在类实例设置此变量</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    stats : ClassVar[<span class="type">Dict</span>[<span class="built_in">str</span>,<span class="built_in">int</span>]] = &#123;&#125;</span><br><span class="line">    <span class="comment"># 实例变量</span></span><br><span class="line">    num : <span class="built_in">int</span></span><br></pre></td></tr></table></figure>

<p>当你传入参数与设置的参数类型不一样时，只会warning，而不会报错</p>
<h3 id="类型提示的元组打包"><a href="#类型提示的元组打包" class="headerlink" title="类型提示的元组打包"></a>类型提示的元组打包</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 正常的元组打包</span></span><br><span class="line">a = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加上类型提示的元组打包</span></span><br><span class="line">t: <span class="type">Tuple</span>[<span class="built_in">int</span>, ...] = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"></span><br><span class="line">t = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"></span><br><span class="line"><span class="comment"># py3.8+ 才有的写法</span></span><br><span class="line"><span class="comment"># 不加...会有warning提示</span></span><br><span class="line">t: <span class="type">Tuple</span>[<span class="built_in">int</span>, ...] = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"></span><br><span class="line">t = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span></span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h3 id="变量类型提示-元组解包"><a href="#变量类型提示-元组解包" class="headerlink" title="变量类型提示-元组解包"></a>变量类型提示-元组解包</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 正常元组解包</span></span><br><span class="line">message = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">a, b, c = message</span><br><span class="line"><span class="built_in">print</span>(a, b, c)  <span class="comment"># 输出 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加上类型提示的元组解包</span></span><br><span class="line">header: <span class="built_in">str</span></span><br><span class="line">kind: <span class="built_in">int</span></span><br><span class="line">body: <span class="type">Optional</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不会 warning 的栗子</span></span><br><span class="line">header, kind, body = (<span class="string">&quot;str&quot;</span>, <span class="number">123</span>, [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 会提示 warning 的栗子</span></span><br><span class="line">header, kind, body = (<span class="number">123</span>, <span class="number">123</span>, [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>])</span><br></pre></td></tr></table></figure>

<h3 id="函数参数类型提示"><a href="#函数参数类型提示" class="headerlink" title="函数参数类型提示"></a>函数参数类型提示</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 参数 name 类型提示 str，而函数返回值类型提示也是 str</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greeting</span>(<span class="params">name: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello &#x27;</span> + name</span><br></pre></td></tr></table></figure>

<h3 id="常用类型"><a href="#常用类型" class="headerlink" title="常用类型"></a>常用类型</h3><ul>
<li>int,float：整型，浮点型</li>
<li>bool,str：布尔型，字符串类型</li>
<li>List,Tuple,Dict,Set:列表，元组，字典，集合</li>
<li>Iterable,Iterator：可迭代类型，迭代器类型</li>
<li>Generator：生成器类型</li>
</ul>
<blockquote>
<p>除了第一和第二点，其他都要import typing模块进行导入</p>
<p>指定类型的时候用list、set、dict、tuple也是可以的，但是不能指定里面的元素类型</p>
<p>且List[T]、Set[T]只能传一个类型，传多个会报错</p>
<p>Dict[T,T]第一个参数指定键的类型，第二个参数指定值得类型</p>
<p>Tuple[T] 指定一个类型的时候，仅针对同一个索引下的元素类型</p>
<p>如果想向List[T]一样指定全部的类型，可以Tuple[T,…] </p>
</blockquote>
<h3 id="变量别名"><a href="#变量别名" class="headerlink" title="变量别名"></a>变量别名</h3><p>可以将复杂一点类型给个别名，这样好用一点</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 别名</span></span><br><span class="line">vector = <span class="type">List</span>[<span class="built_in">float</span>]</span><br><span class="line"></span><br><span class="line">var: vector = [<span class="number">1.1</span>, <span class="number">2.2</span>]</span><br><span class="line"><span class="comment"># 等价写法</span></span><br><span class="line">var: <span class="type">List</span>[<span class="built_in">float</span>] = [<span class="number">1.1</span>, <span class="number">2.2</span>]</span><br></pre></td></tr></table></figure>

<h3 id="NewType"><a href="#NewType" class="headerlink" title="NewType"></a>NewType</h3><p>可以自定义一个新类型：</p>
<ul>
<li>主要用于类型检查</li>
<li>NewType(name,tp)返回一个函数，这个函数返回其原本的值</li>
<li>静态类型检查器会将新类型看做原始类型的一个子类</li>
<li>tp就是原始类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># NewType</span></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> NewType</span><br><span class="line"></span><br><span class="line">UserId = NewType(<span class="string">&#x27;UserId&#x27;</span>, <span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">name_by_id</span>(<span class="params">user_id: UserId</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="built_in">print</span>(user_id)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UserId(<span class="string">&#x27;user&#x27;</span>)  <span class="comment"># Fails type check</span></span><br><span class="line">num = UserId(<span class="number">5</span>)  <span class="comment"># type: <span class="built_in">int</span></span></span><br><span class="line"></span><br><span class="line">name_by_id(<span class="number">42</span>)  <span class="comment"># Fails type check</span></span><br><span class="line">name_by_id(UserId(<span class="number">42</span>))  <span class="comment"># OK</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(UserId(<span class="number">5</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="number">42</span></span><br><span class="line"><span class="number">42</span></span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">&#x27;int&#x27;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># UserId不等于int类型，编译器检查会Warning</span></span><br><span class="line"><span class="comment"># 使用 UserId 类型做算术运算，得到的是 int 类型数据</span></span><br></pre></td></tr></table></figure>

<h3 id="Callable"><a href="#Callable" class="headerlink" title="Callable"></a>Callable</h3><blockquote>
<p>内置函数，返回一个变量是否可以回调</p>
<p>或者typing库函数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Callable</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">callable</span>(f)) <span class="comment"># 内置函数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(f, <span class="type">Callable</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 语法</span></span><br><span class="line"><span class="type">Callable</span> <span class="built_in">type</span>; <span class="type">Callable</span>[[<span class="built_in">int</span>], <span class="built_in">str</span>] <span class="keyword">is</span> a function of (<span class="built_in">int</span>) -&gt; <span class="built_in">str</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">第一个类型[<span class="built_in">int</span>]代表参数类型</span><br><span class="line">第二个类型[<span class="built_in">str</span>]代表返回值类型</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Callable</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_name</span>(<span class="params">name: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Callable 作为函数参数使用，其实只是做一个类型检查的作用，检查传入的参数值 get_func 是否为可调用对象</span></span><br><span class="line"><span class="comment"># Callable  作为函数返回值使用，其实只是做一个类型检查的作用，看看返回值是否为可调用对象</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_name</span>(<span class="params">get_func: <span class="type">Callable</span>[[<span class="built_in">str</span>], <span class="literal">None</span>]</span>):</span><br><span class="line">    <span class="keyword">return</span> get_func</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">vars</span> = get_name(print_name)</span><br><span class="line"><span class="built_in">vars</span>(<span class="string">&quot;test&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="TypeVar泛型"><a href="#TypeVar泛型" class="headerlink" title="TypeVar泛型"></a>TypeVar泛型</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from typing import TypeVar</span><br><span class="line"></span><br><span class="line"># 设置T为任意类型</span><br><span class="line">T = TypeVar(&#x27;T&#x27;)</span><br><span class="line"># 设置可以是int类型也可以是str类型</span><br><span class="line">AA = TypeVar(&#x27;AA&#x27;,int, str)</span><br></pre></td></tr></table></figure>

<h3 id="Any-Type"><a href="#Any-Type" class="headerlink" title="Any Type"></a>Any Type</h3><ul>
<li>特殊类型Any</li>
<li>静态类型检查器会将每种类型都视为与Any兼容</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Any</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">item: <span class="type">Any</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="comment"># Typechecks; &#x27;item&#x27; 可以是任意类型</span></span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 隐式使用 Any</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">legacy_parser</span>(<span class="params">text</span>):</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h3><blockquote>
<p>联合类型</p>
<p>Union[int,str] 表示既可以是int，也可以是str</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from typing import Union</span><br><span class="line"></span><br><span class="line">var : Union[int,str]</span><br><span class="line"></span><br><span class="line"># union 嵌套 union 会自动解包</span><br><span class="line">Union[Union[int, str], float] == Union[int, str, float]</span><br></pre></td></tr></table></figure>

<h3 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h3><p>可选类型</p>
<ul>
<li>不过 Optional 和默认参数其实没啥实质上的区别，只是写法不同</li>
<li>使用 Optional 是为了让 IDE 识别到该参数有一个类型提示，可以传指定的类型和 None，且参数是可选非必传的</li>
<li>Optional[int] 等价于 Union[int, None]</li>
<li>意味着：既可以传指定的类型 int，也可以传 None</li>
<li>Optional[] 里面只能写一个数据类型</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo_func</span>(<span class="params">arg: <span class="type">Optional</span>[<span class="built_in">int</span>] = <span class="literal">None</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(arg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">foo_func()</span><br><span class="line">foo_func(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>



































































</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">AYO</div><div class="post-copyright__author_desc">天行健，君子以自强不息</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://ayo-al.github.io/2022/06/16/python%E5%9F%BA%E7%A1%80/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://ayo-al.github.io/2022/06/16/python%E5%9F%BA%E7%A1%80/')">Python基础</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://ayo-al.github.io/2022/06/16/python%E5%9F%BA%E7%A1%80/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Python基础&amp;url=https://ayo-al.github.io/2022/06/16/python%E5%9F%BA%E7%A1%80/&amp;pic=/img/preview.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://AYO-Al.github.io" target="_blank">AYO</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Python/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Python<span class="tagsPageCount">5</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/preview.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/10/JavaScript/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JavaScript</div></div></a></div><div class="next-post pull-right"><a href="/2022/06/20/Linux/%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Python常用内置函数</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2022/08/10/%E7%88%AC%E8%99%AB%E5%88%9D%E5%A7%8B/" title="爬虫初始"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-10</div><div class="title">爬虫初始</div></div></a></div><div><a href="/2022/08/16/%E8%81%9A%E7%84%A6%E5%BC%8F%E7%88%AC%E8%99%AB/" title="聚焦式爬虫"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-16</div><div class="title">聚焦式爬虫</div></div></a></div><div><a href="/2022/08/09/%E7%88%AC%E8%99%AB%E5%AF%BC%E8%AE%BA/" title="爬虫导论"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-08-09</div><div class="title">爬虫导论</div></div></a></div><div><a href="/2022/06/20/Linux/%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" title="Python常用内置函数"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2022-06-20</div><div class="title">Python常用内置函数</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-switch"><span class="first-comment">Twikoo</span><span id="switch-btn"></span><span class="second-comment">Waline</span></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div id="waline-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);"><b style="color:#fff">AYO的知识输出基地，</b><b style="color:#fff">以输出倒逼输入，以输出巩固知识！</b></div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">AYO</h1><div class="author-info__desc">天行健，君子以自强不息</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/AYO-Al" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://juejin.cn/user/3708003152300183" target="_blank" title="JueJin"><i class="anzhiyufont anzhiyu-icon-book"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Python%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">1 Python简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Python%E7%BC%96%E7%A0%81"><span class="toc-number">2.</span> <span class="toc-text">2 Python编码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-python%E6%A8%A1%E5%9D%97%E5%AE%89%E8%A3%85%E4%B9%8Bpip"><span class="toc-number">3.</span> <span class="toc-text">3 python模块安装之pip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-python%E7%9A%84%E7%BC%A9%E8%BF%9B%E8%A7%84%E5%88%99"><span class="toc-number">4.</span> <span class="toc-text">4 python的缩进规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-number">5.</span> <span class="toc-text">5 标识符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 关键字</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="toc-number">6.</span> <span class="toc-text">6 转义字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%B3%A8%E9%87%8A"><span class="toc-number">7.</span> <span class="toc-text">7 注释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%8D%95%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 单行注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%A4%9A%E8%A1%8C%E6%B3%A8%E9%87%8A"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 多行注释</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%BE%93%E5%87%BA%E5%87%BD%E6%95%B0"><span class="toc-number">8.</span> <span class="toc-text">8 输出函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 格式化输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E7%B2%BE%E5%BA%A6%E5%92%8C%E5%AE%BD%E5%BA%A6%E6%8E%A7%E5%88%B6"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 精度和宽度控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E8%BD%AC%E6%8D%A2%E6%A0%87%E5%BF%97"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 转换标志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E6%A0%BC%E5%BC%8F%E5%AD%97%E7%AC%A6%E5%BD%92%E7%BA%B3"><span class="toc-number">8.4.</span> <span class="toc-text">8.4 格式字符归纳</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E8%BE%93%E5%87%BA%E5%AD%97%E4%BD%93%E6%A0%B7%E8%89%B2"><span class="toc-number">8.5.</span> <span class="toc-text">控制输出字体样色</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E8%BE%93%E5%85%A5%E5%87%BD%E6%95%B0"><span class="toc-number">9.</span> <span class="toc-text">9 输入函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%8F%98%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F"><span class="toc-number">10.</span> <span class="toc-text">10 变量与常量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#python%E5%8F%98%E9%87%8F%E5%9F%9F"><span class="toc-number">10.0.1.</span> <span class="toc-text">python变量域</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">11.</span> <span class="toc-text">11 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 数据类型转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-python%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">12.</span> <span class="toc-text">12 python运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 算术运算符的优先级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B8%83%E5%B0%94%E5%80%BC"><span class="toc-number">12.2.</span> <span class="toc-text">12.2 对象的布尔值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E9%80%89%E6%8B%A9%E7%BB%93%E6%9E%84"><span class="toc-number">13.</span> <span class="toc-text">13 选择结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">13.1.</span> <span class="toc-text">13.1 条件表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-pass%E8%AF%AD%E5%8F%A5"><span class="toc-number">13.2.</span> <span class="toc-text">13.2 pass语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="toc-number">14.</span> <span class="toc-text">14 循环结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-range%E5%87%BD%E6%95%B0"><span class="toc-number">14.1.</span> <span class="toc-text">14.1 range函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-while%E5%BE%AA%E7%8E%AF"><span class="toc-number">14.2.</span> <span class="toc-text">14.2 while循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-for-in%E5%BE%AA%E7%8E%AF"><span class="toc-number">14.3.</span> <span class="toc-text">14.3 for-in循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-4-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">14.4.</span> <span class="toc-text">14.4 流程控制语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-5-%E5%BE%AA%E7%8E%AF%E6%80%BB%E7%BB%93"><span class="toc-number">14.5.</span> <span class="toc-text">14.5 循环总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E5%88%97%E8%A1%A8"><span class="toc-number">15.</span> <span class="toc-text">15 列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-%E5%88%97%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">15.1.</span> <span class="toc-text">15.1 列表的基本操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E5%AD%97%E5%85%B8"><span class="toc-number">16.</span> <span class="toc-text">16 字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-%E5%AD%97%E5%85%B8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">16.1.</span> <span class="toc-text">16.1 字典的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-%E5%AD%97%E5%85%B8%E6%80%BB%E7%BB%93"><span class="toc-number">16.2.</span> <span class="toc-text">16.2 字典总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-%E5%85%83%E7%BB%84"><span class="toc-number">17.</span> <span class="toc-text">17 元组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-%E5%85%83%E7%BB%84%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">17.1.</span> <span class="toc-text">17.1 元组的基本操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-%E9%9B%86%E5%90%88"><span class="toc-number">18.</span> <span class="toc-text">18 集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#18-1-%E9%9B%86%E5%90%88%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">18.1.</span> <span class="toc-text">18.1 集合的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-2-%E5%85%83%E7%BB%84%E4%B8%8E%E9%9B%86%E5%90%88%E6%80%BB%E7%BB%93"><span class="toc-number">18.2.</span> <span class="toc-text">18.2 元组与集合总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E5%BA%8F%E5%88%97%E6%80%BB%E7%BB%93"><span class="toc-number">19.</span> <span class="toc-text">19 序列总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">20.</span> <span class="toc-text">20 字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#20-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%A9%BB%E7%95%99%E6%9C%BA%E5%88%B6"><span class="toc-number">20.1.</span> <span class="toc-text">20.1 字符串的驻留机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">20.2.</span> <span class="toc-text">20.2 字符串的操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%87%BD%E6%95%B0"><span class="toc-number">21.</span> <span class="toc-text">21 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-1-%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0"><span class="toc-number">21.1.</span> <span class="toc-text">21.1 递归函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-2-lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">21.2.</span> <span class="toc-text">21.2 lambda表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#21-2-1-%E8%AF%AD%E6%B3%95"><span class="toc-number">21.2.1.</span> <span class="toc-text">21.2.1 语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-3-%E5%87%BD%E6%95%B0%E6%96%87%E6%A1%A3"><span class="toc-number">21.3.</span> <span class="toc-text">21.3 函数文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-number">22.</span> <span class="toc-text">22 异常处理机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#22-1-raise%E8%AF%AD%E5%8F%A5"><span class="toc-number">22.1.</span> <span class="toc-text">22.1 raise语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-2-BUG%E6%80%BB%E7%BB%93"><span class="toc-number">22.2.</span> <span class="toc-text">22.2 BUG总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-python%E7%B1%BB"><span class="toc-number">23.</span> <span class="toc-text">23 python类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#23-1-%E7%B1%BB%E6%80%BB%E7%BB%93"><span class="toc-number">23.1.</span> <span class="toc-text">23.1 类总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%89%E5%A4%A7%E7%89%B9%E5%BE%81"><span class="toc-number">24.</span> <span class="toc-text">24 面向对象的三大特征</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#24-1-%E5%B0%81%E8%A3%85"><span class="toc-number">24.1.</span> <span class="toc-text">24.1 封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-2-%E7%BB%A7%E6%89%BF"><span class="toc-number">24.2.</span> <span class="toc-text">24.2 继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-3-object%E7%B1%BB"><span class="toc-number">24.3.</span> <span class="toc-text">24.3 object类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-4-%E5%A4%9A%E6%80%81"><span class="toc-number">24.4.</span> <span class="toc-text">24,4 多态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-5-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%80%BB%E7%BB%93"><span class="toc-number">24.5.</span> <span class="toc-text">24.5 面向对象总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-%E7%B1%BB%E7%9A%84%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">25.</span> <span class="toc-text">25 类的浅拷贝与深拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%8C%BA%E5%88%AB"><span class="toc-number">25.0.1.</span> <span class="toc-text">浅拷贝与深拷贝区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B"><span class="toc-number">26.</span> <span class="toc-text">26 模块化编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#26-1-%E4%B8%BB%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C"><span class="toc-number">26.1.</span> <span class="toc-text">26.1 主程序运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-2-python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97"><span class="toc-number">26.2.</span> <span class="toc-text">26.2 python常用模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-3-%E6%A8%A1%E5%9D%97%E6%80%BB%E7%BB%93"><span class="toc-number">26.3.</span> <span class="toc-text">26.3 模块总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-python%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">27.</span> <span class="toc-text">27 python文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#27-1-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E8%AE%BE%E7%BD%AE%E6%A8%A1%E5%BC%8F"><span class="toc-number">27.1.</span> <span class="toc-text">27.1.文件操作设置模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-2-os-%E6%A8%A1%E5%9D%97"><span class="toc-number">27.2.</span> <span class="toc-text">27.2 os 模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-python%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85"><span class="toc-number">28.</span> <span class="toc-text">28 python文件打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#29-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">29.</span> <span class="toc-text">29 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#29-1-re%E6%A8%A1%E5%9D%97"><span class="toc-number">29.1.</span> <span class="toc-text">29.1 re模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#30-%E9%97%AD%E5%8C%85"><span class="toc-number">30.</span> <span class="toc-text">30 闭包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#31-%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">31.</span> <span class="toc-text">31 装饰器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-number">32.</span> <span class="toc-text">32 迭代器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">33.</span> <span class="toc-text">33 生成器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B"><span class="toc-number">34.</span> <span class="toc-text">34.并发编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#34-1-%E6%A6%82%E5%BF%B5"><span class="toc-number">34.1.</span> <span class="toc-text">34.1.概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-2-%E5%85%A8%E5%B1%80%E8%A7%A3%E9%87%8A%E5%99%A8%E9%94%81-GIL"><span class="toc-number">34.2.</span> <span class="toc-text">34.2.全局解释器锁(GIL)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-3-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B"><span class="toc-number">34.3.</span> <span class="toc-text">34.3.多线程编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-4-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%BC%96%E7%A8%8B"><span class="toc-number">34.4.</span> <span class="toc-text">34.4.多进程编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-5-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%80%BB%E7%BB%93"><span class="toc-number">34.5.</span> <span class="toc-text">34.5.多进程与多线程总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-6-%E5%8D%8F%E7%A8%8B%E7%BC%96%E7%A8%8B"><span class="toc-number">34.6.</span> <span class="toc-text">34.6.协程编程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%8D%8F%E7%A8%8B"><span class="toc-number">34.6.1.</span> <span class="toc-text">创建协程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAtask"><span class="toc-number">34.6.2.</span> <span class="toc-text">创建task</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E5%9B%9E%E8%B0%83"><span class="toc-number">34.6.3.</span> <span class="toc-text">绑定回调</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%BB%E5%A1%9E%E4%B8%8Eawait"><span class="toc-number">34.6.4.</span> <span class="toc-text">阻塞与await</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E4%B8%8E%E5%B9%B6%E8%A1%8C"><span class="toc-number">34.6.5.</span> <span class="toc-text">并发与并行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E7%A8%8B%E5%B5%8C%E5%A5%97"><span class="toc-number">34.6.6.</span> <span class="toc-text">协程嵌套</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%8F%E7%A8%8B%E5%81%9C%E6%AD%A2"><span class="toc-number">34.6.7.</span> <span class="toc-text">协程停止</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">34.6.8.</span> <span class="toc-text">不同线程的事件循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E7%BA%BF%E7%A8%8B%E5%8D%8F%E7%A8%8B"><span class="toc-number">34.6.9.</span> <span class="toc-text">新线程协程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%AD%90%E7%BA%BF%E7%A8%8B"><span class="toc-number">34.6.10.</span> <span class="toc-text">主线程与子线程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#aiohttp%E6%A8%A1%E5%9D%97"><span class="toc-number">34.6.11.</span> <span class="toc-text">aiohttp模块</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#session%E8%AF%B7%E6%B1%82"><span class="toc-number">34.6.11.1.</span> <span class="toc-text">session请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%97%E8%8A%82%E6%B5%81%E5%BD%A2%E5%BC%8F%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">34.6.11.2.</span> <span class="toc-text">使用字节流形式获取数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%90%8C%E6%97%B6%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%95%B0%E9%87%8F-%E9%93%BE%E6%8E%A5%E6%B1%A0"><span class="toc-number">34.6.11.3.</span> <span class="toc-text">控制同时连接的数量(链接池)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E6%80%BB%E7%BB%93"><span class="toc-number">34.7.</span> <span class="toc-text">34.并发编程总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-%E6%96%AD%E8%A8%80"><span class="toc-number">35.</span> <span class="toc-text">35.断言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#36-%E5%8F%8D%E5%B0%84"><span class="toc-number">36.</span> <span class="toc-text">36.反射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#37-%E6%B3%9B%E5%9E%8B"><span class="toc-number">37.</span> <span class="toc-text">37.泛型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E8%AE%BE%E7%BD%AE"><span class="toc-number">37.1.</span> <span class="toc-text">变量类型设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E6%8F%90%E7%A4%BA%E7%9A%84%E5%85%83%E7%BB%84%E6%89%93%E5%8C%85"><span class="toc-number">37.2.</span> <span class="toc-text">类型提示的元组打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8F%90%E7%A4%BA-%E5%85%83%E7%BB%84%E8%A7%A3%E5%8C%85"><span class="toc-number">37.3.</span> <span class="toc-text">变量类型提示-元组解包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E6%8F%90%E7%A4%BA"><span class="toc-number">37.4.</span> <span class="toc-text">函数参数类型提示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">37.5.</span> <span class="toc-text">常用类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%88%AB%E5%90%8D"><span class="toc-number">37.6.</span> <span class="toc-text">变量别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NewType"><span class="toc-number">37.7.</span> <span class="toc-text">NewType</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Callable"><span class="toc-number">37.8.</span> <span class="toc-text">Callable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeVar%E6%B3%9B%E5%9E%8B"><span class="toc-number">37.9.</span> <span class="toc-text">TypeVar泛型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Any-Type"><span class="toc-number">37.10.</span> <span class="toc-text">Any Type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Union"><span class="toc-number">37.11.</span> <span class="toc-text">Union</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optional"><span class="toc-number">37.12.</span> <span class="toc-text">Optional</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/01/09/%E5%91%BD%E4%BB%A4/" title="Linux常用命令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux常用命令"/></a><div class="content"><a class="title" href="/2024/01/09/%E5%91%BD%E4%BB%A4/" title="Linux常用命令">Linux常用命令</a><time datetime="2024-01-09T05:57:27.497Z" title="发表于 2024-01-09 13:57:27">2024-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/23/DNS%E6%B7%B1%E5%85%A5/" title="DNS深入"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DNS深入"/></a><div class="content"><a class="title" href="/2023/11/23/DNS%E6%B7%B1%E5%85%A5/" title="DNS深入">DNS深入</a><time datetime="2023-11-23T06:05:51.909Z" title="发表于 2023-11-23 14:05:51">2023-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/16/%E7%B3%BB%E7%BB%9F%E7%AB%AF%E5%8F%A3%E5%92%8C%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7/" title="系统端口能让普通用户使用嘛？"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="系统端口能让普通用户使用嘛？"/></a><div class="content"><a class="title" href="/2023/08/16/%E7%B3%BB%E7%BB%9F%E7%AB%AF%E5%8F%A3%E5%92%8C%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7/" title="系统端口能让普通用户使用嘛？">系统端口能让普通用户使用嘛？</a><time datetime="2023-08-15T16:00:00.000Z" title="发表于 2023-08-16 00:00:00">2023-08-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/20/kubernetes%E7%BD%91%E7%BB%9C/" title="Kubernetes网络"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes网络"/></a><div class="content"><a class="title" href="/2023/07/20/kubernetes%E7%BD%91%E7%BB%9C/" title="Kubernetes网络">Kubernetes网络</a><time datetime="2023-07-19T16:00:00.000Z" title="发表于 2023-07-20 00:00:00">2023-07-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/14/Prometheus/" title="Prometheus"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Prometheus"/></a><div class="content"><a class="title" href="/2023/06/14/Prometheus/" title="Prometheus">Prometheus</a><time datetime="2023-06-13T16:00:00.000Z" title="发表于 2023-06-14 00:00:00">2023-06-14</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="/2609320892@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://regexlearn.com/zh-cn" title="Regex 101"><i class="anzhiyufont anzhiyu-icon-font"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://regexcrossword.com/" title="Regexcrossword"><i class="anzhiyufont anzhiyu-icon-bolt"></i></a><a class="deal_link" href="/atom.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/AYO-Al" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://learngitbranching.js.org/?demo=&amp;locale=zh_CN" title="Learn Git"><i class="anzhiyufont anzhiyu-icon-pencil"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.drawio.com/" title="draw.io"><i class="anzhiyufont anzhiyu-icon-instagram"></i></a><a class="deal_link" href="/copyright" title="CC"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i></a></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="algolia" target="_blank" rel="noopener" href="https://www.algolia.com/">algolia</a><a class="footer-item" title="twikoo" target="_blank" rel="noopener" href="https://twikoo.js.org/">twikoo</a><a class="footer-item" title="vercel" target="_blank" rel="noopener" href="https://vercel.com/">vercel</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" target="_blank" rel="noopener" href="https://docs.anheyu.com/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" target="_blank" rel="noopener" href="https://blog.anheyu.com/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v7.0.0" title="博客框架为Hexo_v7.0.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v7.0.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2021 - 2024 By <a class="footer-bar-link" href="/" title="AYO" target="_blank">AYO</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        const from = '出自 ' + data.from
        const sub = ["生活明朗&#44; 万物可爱&#44; 人间值得&#44; 未来可期."]
        sub.unshift(data.hitokoto, from)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.0.15/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/AYO-Al/AYO-Al.github.io" title="博客">博客</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/AYO-Al" title="本站项目由GitHub托管">本站项目由GitHub托管</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">35</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">24</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://git.yuki.love/" title="AYO网站"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="AYO网站"/><span class="back-menu-item-text">AYO网站</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://juejin.cn/user/3708003152300183" title="AYO博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="AYO博客"/><span class="back-menu-item-text">AYO博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/AYO-Al" title="GitHub"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="GitHub"/><span class="back-menu-item-text">GitHub</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Ansible/" style="font-size: 0.88rem;">Ansible<sup>1</sup></a><a href="/tags/CDN/" style="font-size: 0.88rem;">CDN<sup>1</sup></a><a href="/tags/DNS/" style="font-size: 0.88rem;">DNS<sup>1</sup></a><a href="/tags/ELK/" style="font-size: 0.88rem;">ELK<sup>1</sup></a><a href="/tags/Httpd/" style="font-size: 0.88rem;">Httpd<sup>1</sup></a><a href="/tags/Keepalived/" style="font-size: 0.88rem;">Keepalived<sup>1</sup></a><a href="/tags/Kubernetes/" style="font-size: 0.88rem;">Kubernetes<sup>2</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>18</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>1</sup></a><a href="/tags/Nginx/" style="font-size: 0.88rem;">Nginx<sup>2</sup></a><a href="/tags/Prometheus/" style="font-size: 0.88rem;">Prometheus<sup>1</sup></a><a href="/tags/Python/" style="font-size: 0.88rem;">Python<sup>5</sup></a><a href="/tags/Redis/" style="font-size: 0.88rem;">Redis<sup>1</sup></a><a href="/tags/Shell/" style="font-size: 0.88rem;">Shell<sup>4</sup></a><a href="/tags/Web/" style="font-size: 0.88rem;">Web<sup>1</sup></a><a href="/tags/Zabbix/" style="font-size: 0.88rem;">Zabbix<sup>1</sup></a><a href="/tags/iptables/" style="font-size: 0.88rem;">iptables<sup>1</sup></a><a href="/tags/shell%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">shell命令<sup>1</sup></a><a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 0.88rem;">容器<sup>2</sup></a><a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 0.88rem;">爬虫<sup>3</sup></a><a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 0.88rem;">监控<sup>2</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">网络<sup>3</sup></a><a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" style="font-size: 0.88rem;">自动化运维<sup>1</sup></a><a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 0.88rem;">随笔<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"><a class="tag-list" href="/tags/Linux" title="Linux">Linux</a><a class="tag-list" href="/tags/Database" title="Database">Database</a><a class="tag-list" href="/tags/Kubernetes" title="Kubernetes">Kubernetes</a></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2021 By 安知鱼 V1.6.10",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 AYO 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.56.5/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.yuki.love',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.yuki.love',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><script>(() => {
  const initWaline = () => {
    const waline = Waline.init(Object.assign({
      el: '#waline-wrap',
      serverURL: '',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: false,
    }, null))
  }

  const loadWaline = async () => {
    if (typeof Waline === 'object') initWaline()
    else {
      await getCSS('https://cdn.cbd.int/@waline/client@2.15.5/dist/waline.css')
      await getScript('https://cdn.cbd.int/@waline/client@2.15.5/dist/waline.js')
      initWaline()
    }
  }

  if ('Twikoo' === 'Waline' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.yuki.love',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>